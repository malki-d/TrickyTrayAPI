2025-12-24 16:54:16.607 +02:00 [INF] Executed DbCommand (259ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [DemoToTest];
2025-12-24 16:54:16.725 +02:00 [INF] Executed DbCommand (91ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [DemoToTest] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-12-24 16:54:16.738 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-24 16:54:16.742 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-12-24 16:54:16.788 +02:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-12-24 16:54:16.828 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-12-24 16:54:16.836 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-24 16:54:16.838 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-24 16:54:16.852 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-12-24 16:54:16.859 +02:00 [INF] Applying migration '20251221113435_InitialCreate'.
2025-12-24 16:54:16.883 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Categories] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Categories] PRIMARY KEY ([Id])
);
2025-12-24 16:54:16.902 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Donors] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NULL,
    [Email] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Donors] PRIMARY KEY ([Id])
);
2025-12-24 16:54:16.908 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CartItems] (
    [Id] int NOT NULL IDENTITY,
    [Quantity] int NOT NULL,
    [GiftId] int NOT NULL,
    [CartId] int NOT NULL,
    CONSTRAINT [PK_CartItems] PRIMARY KEY ([Id])
);
2025-12-24 16:54:16.913 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Carts] (
    [Id] int NOT NULL IDENTITY,
    [CostumerId] int NOT NULL,
    CONSTRAINT [PK_Carts] PRIMARY KEY ([Id])
);
2025-12-24 16:54:16.917 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Costumers] (
    [Id] int NOT NULL IDENTITY,
    [LastName] nvarchar(max) NOT NULL,
    [FirstName] nvarchar(max) NOT NULL,
    [Email] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NOT NULL,
    [TypeCostumer] int NOT NULL,
    [GiftId] int NULL,
    CONSTRAINT [PK_Costumers] PRIMARY KEY ([Id])
);
2025-12-24 16:54:16.924 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Gifts] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [TypeGift] int NOT NULL,
    [DonorId] int NOT NULL,
    [CategoryId] int NOT NULL,
    [WinnerId] int NOT NULL,
    CONSTRAINT [PK_Gifts] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Gifts_Categories_CategoryId] FOREIGN KEY ([CategoryId]) REFERENCES [Categories] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Gifts_Costumers_WinnerId] FOREIGN KEY ([WinnerId]) REFERENCES [Costumers] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Gifts_Donors_DonorId] FOREIGN KEY ([DonorId]) REFERENCES [Donors] ([Id]) ON DELETE CASCADE
);
2025-12-24 16:54:16.929 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Purchases] (
    [Id] int NOT NULL IDENTITY,
    [CostumerId] int NOT NULL,
    [Price] int NOT NULL,
    [Date] datetime2 NOT NULL,
    CONSTRAINT [PK_Purchases] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Purchases_Costumers_CostumerId] FOREIGN KEY ([CostumerId]) REFERENCES [Costumers] ([Id]) ON DELETE CASCADE
);
2025-12-24 16:54:16.936 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PurchaseItems] (
    [Id] int NOT NULL IDENTITY,
    [GiftId] int NOT NULL,
    [IsWinner] bit NOT NULL,
    [CostumerId] int NOT NULL,
    [PurchaseId] int NULL,
    CONSTRAINT [PK_PurchaseItems] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PurchaseItems_Costumers_CostumerId] FOREIGN KEY ([CostumerId]) REFERENCES [Costumers] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_PurchaseItems_Gifts_GiftId] FOREIGN KEY ([GiftId]) REFERENCES [Gifts] ([Id]),
    CONSTRAINT [FK_PurchaseItems_Purchases_PurchaseId] FOREIGN KEY ([PurchaseId]) REFERENCES [Purchases] ([Id])
);
2025-12-24 16:54:16.945 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_CartItems_CartId] ON [CartItems] ([CartId]);
2025-12-24 16:54:16.948 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_CartItems_GiftId] ON [CartItems] ([GiftId]);
2025-12-24 16:54:16.951 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Carts_CostumerId] ON [Carts] ([CostumerId]);
2025-12-24 16:54:16.954 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Costumers_GiftId] ON [Costumers] ([GiftId]);
2025-12-24 16:54:16.959 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Gifts_CategoryId] ON [Gifts] ([CategoryId]);
2025-12-24 16:54:16.962 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Gifts_DonorId] ON [Gifts] ([DonorId]);
2025-12-24 16:54:16.964 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Gifts_WinnerId] ON [Gifts] ([WinnerId]);
2025-12-24 16:54:16.967 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PurchaseItems_CostumerId] ON [PurchaseItems] ([CostumerId]);
2025-12-24 16:54:16.970 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PurchaseItems_GiftId] ON [PurchaseItems] ([GiftId]);
2025-12-24 16:54:16.975 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PurchaseItems_PurchaseId] ON [PurchaseItems] ([PurchaseId]);
2025-12-24 16:54:16.978 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Purchases_CostumerId] ON [Purchases] ([CostumerId]);
2025-12-24 16:54:16.992 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [CartItems] ADD CONSTRAINT [FK_CartItems_Carts_CartId] FOREIGN KEY ([CartId]) REFERENCES [Carts] ([Id]) ON DELETE CASCADE;
2025-12-24 16:54:16.996 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [CartItems] ADD CONSTRAINT [FK_CartItems_Gifts_GiftId] FOREIGN KEY ([GiftId]) REFERENCES [Gifts] ([Id]);
2025-12-24 16:54:16.999 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Carts] ADD CONSTRAINT [FK_Carts_Costumers_CostumerId] FOREIGN KEY ([CostumerId]) REFERENCES [Costumers] ([Id]) ON DELETE CASCADE;
2025-12-24 16:54:17.003 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Costumers] ADD CONSTRAINT [FK_Costumers_Gifts_GiftId] FOREIGN KEY ([GiftId]) REFERENCES [Gifts] ([Id]);
2025-12-24 16:54:17.011 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251221113435_InitialCreate', N'9.0.11');
2025-12-24 16:54:17.012 +02:00 [INF] Applying migration '20251223155253_InitialCreated'.
2025-12-24 16:54:17.034 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Carts] DROP CONSTRAINT [FK_Carts_Costumers_CostumerId];
2025-12-24 16:54:17.038 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Gifts] DROP CONSTRAINT [FK_Gifts_Costumers_WinnerId];
2025-12-24 16:54:17.043 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [PurchaseItems] DROP CONSTRAINT [FK_PurchaseItems_Costumers_CostumerId];
2025-12-24 16:54:17.046 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Purchases] DROP CONSTRAINT [FK_Purchases_Costumers_CostumerId];
2025-12-24 16:54:17.051 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE [Costumers];
2025-12-24 16:54:17.600 +02:00 [INF] Executed DbCommand (547ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Purchases].[CostumerId]', N'UserId', 'COLUMN';
2025-12-24 16:54:17.605 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Purchases].[IX_Purchases_CostumerId]', N'IX_Purchases_UserId', 'INDEX';
2025-12-24 16:54:17.608 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[PurchaseItems].[CostumerId]', N'UserId', 'COLUMN';
2025-12-24 16:54:17.611 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[PurchaseItems].[IX_PurchaseItems_CostumerId]', N'IX_PurchaseItems_UserId', 'INDEX';
2025-12-24 16:54:17.613 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Carts].[CostumerId]', N'UserId', 'COLUMN';
2025-12-24 16:54:17.615 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Carts].[IX_Carts_CostumerId]', N'IX_Carts_UserId', 'INDEX';
2025-12-24 16:54:17.657 +02:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var sysname;
SELECT @var = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Donors]') AND [c].[name] = N'Name');
IF @var IS NOT NULL EXEC(N'ALTER TABLE [Donors] DROP CONSTRAINT [' + @var + '];');
ALTER TABLE [Donors] ALTER COLUMN [Name] nvarchar(100) NULL;
2025-12-24 16:54:17.689 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Donors]') AND [c].[name] = N'Email');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Donors] DROP CONSTRAINT [' + @var1 + '];');
UPDATE [Donors] SET [Email] = N'' WHERE [Email] IS NULL;
ALTER TABLE [Donors] ALTER COLUMN [Email] nvarchar(max) NOT NULL;
ALTER TABLE [Donors] ADD DEFAULT N'' FOR [Email];
2025-12-24 16:54:17.694 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [LastName] nvarchar(max) NOT NULL,
    [FirstName] nvarchar(max) NOT NULL,
    [Email] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NOT NULL,
    [TypeCostumer] int NOT NULL,
    [GiftId] int NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Users_Gifts_GiftId] FOREIGN KEY ([GiftId]) REFERENCES [Gifts] ([Id])
);
2025-12-24 16:54:17.696 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Users_GiftId] ON [Users] ([GiftId]);
2025-12-24 16:54:17.699 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Carts] ADD CONSTRAINT [FK_Carts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2025-12-24 16:54:17.702 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Gifts] ADD CONSTRAINT [FK_Gifts_Users_WinnerId] FOREIGN KEY ([WinnerId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2025-12-24 16:54:17.704 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [PurchaseItems] ADD CONSTRAINT [FK_PurchaseItems_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2025-12-24 16:54:17.708 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Purchases] ADD CONSTRAINT [FK_Purchases_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2025-12-24 16:54:17.709 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251223155253_InitialCreated', N'9.0.11');
2025-12-24 16:54:17.711 +02:00 [INF] Applying migration '20251223184055_InitialCreate5'.
2025-12-24 16:54:17.725 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Gifts] DROP CONSTRAINT [FK_Gifts_Users_WinnerId];
2025-12-24 16:54:17.752 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var2 sysname;
SELECT @var2 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Gifts]') AND [c].[name] = N'TypeGift');
IF @var2 IS NOT NULL EXEC(N'ALTER TABLE [Gifts] DROP CONSTRAINT [' + @var2 + '];');
ALTER TABLE [Gifts] DROP COLUMN [TypeGift];
2025-12-24 16:54:17.783 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var3 sysname;
SELECT @var3 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Gifts]') AND [c].[name] = N'WinnerId');
IF @var3 IS NOT NULL EXEC(N'ALTER TABLE [Gifts] DROP CONSTRAINT [' + @var3 + '];');
ALTER TABLE [Gifts] ALTER COLUMN [WinnerId] int NULL;
2025-12-24 16:54:17.810 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var4 sysname;
SELECT @var4 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Gifts]') AND [c].[name] = N'Name');
IF @var4 IS NOT NULL EXEC(N'ALTER TABLE [Gifts] DROP CONSTRAINT [' + @var4 + '];');
ALTER TABLE [Gifts] ALTER COLUMN [Name] nvarchar(100) NOT NULL;
2025-12-24 16:54:17.842 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var5 sysname;
SELECT @var5 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Gifts]') AND [c].[name] = N'Description');
IF @var5 IS NOT NULL EXEC(N'ALTER TABLE [Gifts] DROP CONSTRAINT [' + @var5 + '];');
ALTER TABLE [Gifts] ALTER COLUMN [Description] nvarchar(200) NOT NULL;
2025-12-24 16:54:17.845 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Gifts] ADD CONSTRAINT [FK_Gifts_Users_WinnerId] FOREIGN KEY ([WinnerId]) REFERENCES [Users] ([Id]);
2025-12-24 16:54:17.847 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251223184055_InitialCreate5', N'9.0.11');
2025-12-24 16:54:17.848 +02:00 [INF] Applying migration '20251224145401_initialCreate4'.
2025-12-24 16:54:17.854 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251224145401_initialCreate4', N'9.0.11');
2025-12-24 16:54:17.864 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-12-24 16:57:30.585 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 16:57:30.668 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 16:57:30.675 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 16:57:30.678 +02:00 [INF] Hosting environment: Development
2025-12-24 16:57:30.680 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 16:57:31.662 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 16:57:32.349 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 704.8815ms
2025-12-24 16:57:32.389 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 16:57:32.391 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 16:57:32.406 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 16.8025ms
2025-12-24 16:57:32.507 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 116.1635ms
2025-12-24 16:57:32.578 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 16:57:32.916 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 337.9627ms
2025-12-24 17:01:21.678 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 17:01:21.753 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 17:01:21.759 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 17:01:21.761 +02:00 [INF] Hosting environment: Development
2025-12-24 17:01:21.764 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 17:01:22.507 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 17:01:23.166 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 675.4354ms
2025-12-24 17:01:23.169 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 17:01:23.191 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 21.618ms
2025-12-24 17:01:23.201 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 17:01:23.311 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 110.8688ms
2025-12-24 17:01:23.394 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 17:01:23.693 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 298.9265ms
2025-12-24 17:01:47.310 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 17:01:47.344 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 17:01:47.349 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 17:01:47.351 +02:00 [INF] Hosting environment: Development
2025-12-24 17:01:47.353 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 17:01:47.936 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 17:01:48.318 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 395.8916ms
2025-12-24 17:01:48.323 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 17:01:48.336 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 13.3923ms
2025-12-24 17:01:48.341 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 17:01:48.389 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 48.2028ms
2025-12-24 17:01:48.435 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 17:01:48.629 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 193.6154ms
2025-12-24 17:02:41.722 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7260/api/Gift - application/json 84
2025-12-24 17:02:41.758 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI)'
2025-12-24 17:02:41.830 +02:00 [INF] Route matched with {action = "Create", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.Models.Gift]] Create(TrickyTrayAPI.DTOs.CreateGiftDTO) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 17:02:42.350 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 17:02:44.958 +02:00 [INF] Executed DbCommand (126ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Gifts] ([CategoryId], [Description], [DonorId], [Name], [WinnerId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-12-24 17:02:45.859 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@__g_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[Name], [g].[WinnerId], [c].[Id], [c].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[PhoneNumber], [u].[Id], [u].[Email], [u].[FirstName], [u].[GiftId], [u].[LastName], [u].[PhoneNumber], [u].[TypeCostumer]
FROM [Gifts] AS [g]
INNER JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Users] AS [u] ON [g].[WinnerId] = [u].[Id]
WHERE [g].[Id] = @__g_Id_0
2025-12-24 17:02:45.950 +02:00 [INF] create gift 1
2025-12-24 17:02:45.964 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3603.2692ms.
2025-12-24 17:02:45.984 +02:00 [INF] Executing OkObjectResult, writing value of type 'TrickyTrayAPI.DTOs.GetGiftDTO'.
2025-12-24 17:02:46.011 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI) in 4167.6928ms
2025-12-24 17:02:46.015 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI)'
2025-12-24 17:02:46.033 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7260/api/Gift - 200 null application/json; charset=utf-8 4312.0259ms
2025-12-24 17:05:40.003 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 17:05:40.033 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 17:05:40.036 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 17:05:40.038 +02:00 [INF] Hosting environment: Development
2025-12-24 17:05:40.039 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 17:05:40.806 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 17:05:41.164 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 365.8051ms
2025-12-24 17:05:41.176 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 17:05:41.190 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 17:05:41.190 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 14.7598ms
2025-12-24 17:05:41.294 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 103.5935ms
2025-12-24 17:05:41.346 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 17:05:41.653 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 307.2115ms
2025-12-24 17:06:48.492 +02:00 [INF] Request starting HTTP/2 DELETE https://localhost:7260/api/Gift/1 - null null
2025-12-24 17:06:48.521 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.Delete (TrickyTrayAPI)'
2025-12-24 17:06:48.611 +02:00 [INF] Route matched with {action = "Delete", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Delete(Int32) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 17:06:49.048 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.GiftController.Delete (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 17:06:52.063 +02:00 [INF] Executed DbCommand (91ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[Name], [g].[WinnerId]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__p_0
2025-12-24 17:06:52.476 +02:00 [INF] Executed DbCommand (45ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Gifts]
OUTPUT 1
WHERE [Id] = @p0;
2025-12-24 17:06:52.504 +02:00 [INF] delete gift 1
2025-12-24 17:06:52.515 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.GiftController.Delete (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.NoContentResult in 3457.9451ms.
2025-12-24 17:06:52.538 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-12-24 17:06:52.550 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.Delete (TrickyTrayAPI) in 3926.5332ms
2025-12-24 17:06:52.554 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.Delete (TrickyTrayAPI)'
2025-12-24 17:06:52.573 +02:00 [INF] Request finished HTTP/2 DELETE https://localhost:7260/api/Gift/1 - 204 null null 4080.7483ms
2025-12-24 17:07:16.207 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7260/api/Gift - application/json 85
2025-12-24 17:07:16.248 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI)'
2025-12-24 17:07:16.259 +02:00 [INF] Route matched with {action = "Create", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.Models.Gift]] Create(TrickyTrayAPI.DTOs.CreateGiftDTO) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 17:07:16.382 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 17:07:16.497 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Gifts] ([CategoryId], [Description], [DonorId], [Name], [WinnerId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-12-24 17:07:16.708 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__g_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[Name], [g].[WinnerId], [c].[Id], [c].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[PhoneNumber], [u].[Id], [u].[Email], [u].[FirstName], [u].[GiftId], [u].[LastName], [u].[PhoneNumber], [u].[TypeCostumer]
FROM [Gifts] AS [g]
INNER JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Users] AS [u] ON [g].[WinnerId] = [u].[Id]
WHERE [g].[Id] = @__g_Id_0
2025-12-24 17:07:16.767 +02:00 [INF] create gift 2
2025-12-24 17:07:16.773 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 387.875ms.
2025-12-24 17:07:16.797 +02:00 [INF] Executing OkObjectResult, writing value of type 'TrickyTrayAPI.DTOs.GetGiftDTO'.
2025-12-24 17:07:16.818 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI) in 553.2054ms
2025-12-24 17:07:16.821 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI)'
2025-12-24 17:07:16.824 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7260/api/Gift - 200 null application/json; charset=utf-8 616.4274ms
2025-12-24 17:07:46.784 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Gift/2 - null null
2025-12-24 17:07:46.797 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.GetById (TrickyTrayAPI)'
2025-12-24 17:07:46.830 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.DTOs.GetGiftDTO]] GetById(Int32) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 17:07:46.889 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.GiftController.GetById (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 17:07:47.066 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[Name], [g].[WinnerId], [c].[Id], [c].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[PhoneNumber], [u].[Id], [u].[Email], [u].[FirstName], [u].[GiftId], [u].[LastName], [u].[PhoneNumber], [u].[TypeCostumer]
FROM [Gifts] AS [g]
INNER JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Users] AS [u] ON [g].[WinnerId] = [u].[Id]
WHERE [g].[Id] = @__id_0
2025-12-24 17:07:47.086 +02:00 [INF] get gift by id 2
2025-12-24 17:07:47.088 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.GiftController.GetById (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 194.5758ms.
2025-12-24 17:07:47.094 +02:00 [INF] Executing OkObjectResult, writing value of type 'TrickyTrayAPI.DTOs.GetGiftDTO'.
2025-12-24 17:07:47.096 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.GetById (TrickyTrayAPI) in 256.0327ms
2025-12-24 17:07:47.114 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.GetById (TrickyTrayAPI)'
2025-12-24 17:07:47.116 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Gift/2 - 200 null application/json; charset=utf-8 331.8176ms
2025-12-24 17:08:23.231 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7260/api/Gift/2 - application/json 75
2025-12-24 17:08:23.250 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.Update (TrickyTrayAPI)'
2025-12-24 17:08:23.262 +02:00 [INF] Route matched with {action = "Update", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.Models.Gift]] Update(TrickyTrayAPI.DTOs.UpdateGiftDTO, Int32) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 17:08:23.295 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.GiftController.Update (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 17:08:23.343 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Gifts] AS [g]
        WHERE [g].[Id] = @__id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-24 17:08:23.360 +02:00 [INF] check Exists gift 2
2025-12-24 17:08:23.380 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[Name], [g].[WinnerId], [c].[Id], [c].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[PhoneNumber], [u].[Id], [u].[Email], [u].[FirstName], [u].[GiftId], [u].[LastName], [u].[PhoneNumber], [u].[TypeCostumer]
FROM [Gifts] AS [g]
INNER JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Users] AS [u] ON [g].[WinnerId] = [u].[Id]
WHERE [g].[Id] = @__id_0
2025-12-24 17:08:23.414 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Gifts] SET [CategoryId] = @p0, [Description] = @p1, [Name] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-12-24 17:08:23.425 +02:00 [INF] update gift 2
2025-12-24 17:09:04.686 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 17:09:04.724 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 17:09:04.728 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 17:09:04.730 +02:00 [INF] Hosting environment: Development
2025-12-24 17:09:04.731 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 17:09:05.545 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 17:09:05.992 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 452.3425ms
2025-12-24 17:09:06.041 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 17:09:06.041 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 17:09:06.061 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 20.0169ms
2025-12-24 17:09:06.135 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 94.1138ms
2025-12-24 17:09:06.180 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 17:09:06.436 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 257.3871ms
2025-12-24 17:09:23.036 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7260/api/Gift/2 - application/json 65
2025-12-24 17:09:23.059 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.Update (TrickyTrayAPI)'
2025-12-24 17:09:23.129 +02:00 [INF] Route matched with {action = "Update", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.Models.Gift]] Update(TrickyTrayAPI.DTOs.UpdateGiftDTO, Int32) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 17:09:23.676 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.GiftController.Update (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 17:09:26.458 +02:00 [INF] Executed DbCommand (103ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Gifts] AS [g]
        WHERE [g].[Id] = @__id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-24 17:09:26.512 +02:00 [INF] check Exists gift 2
2025-12-24 17:09:26.859 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[Name], [g].[WinnerId], [c].[Id], [c].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[PhoneNumber], [u].[Id], [u].[Email], [u].[FirstName], [u].[GiftId], [u].[LastName], [u].[PhoneNumber], [u].[TypeCostumer]
FROM [Gifts] AS [g]
INNER JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Users] AS [u] ON [g].[WinnerId] = [u].[Id]
WHERE [g].[Id] = @__id_0
2025-12-24 17:09:27.395 +02:00 [INF] Executed DbCommand (99ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Gifts] SET [CategoryId] = @p0, [Description] = @p1, [Name] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-12-24 17:09:27.516 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'WebApi.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Gifts_Categories_CategoryId". The conflict occurred in database "DemoToTest", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:94f4e9a9-afdc-4047-8800-e69c530263d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Gifts_Categories_CategoryId". The conflict occurred in database "DemoToTest", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:94f4e9a9-afdc-4047-8800-e69c530263d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-12-24 17:09:27.719 +02:00 [ERR] cant update gift 2
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Gifts_Categories_CategoryId". The conflict occurred in database "DemoToTest", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:94f4e9a9-afdc-4047-8800-e69c530263d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at TrickyTrayAPI.Repositories.GiftRepository.UpdateAsync(UpdateGiftDTO gift, Int32 id) in C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI\Repositories\GiftRepository.cs:line 45
   at TrickyTrayAPI.Services.GiftService.UpdateAsync(UpdateGiftDTO gift, Int32 id) in C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI\Services\GiftService.cs:line 80
2025-12-24 17:09:27.924 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.Update (TrickyTrayAPI) in 4785.5544ms
2025-12-24 17:09:27.930 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.Update (TrickyTrayAPI)'
2025-12-24 17:09:27.939 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Gifts_Categories_CategoryId". The conflict occurred in database "DemoToTest", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:94f4e9a9-afdc-4047-8800-e69c530263d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at TrickyTrayAPI.Repositories.GiftRepository.UpdateAsync(UpdateGiftDTO gift, Int32 id) in C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI\Repositories\GiftRepository.cs:line 45
   at TrickyTrayAPI.Services.GiftService.UpdateAsync(UpdateGiftDTO gift, Int32 id) in C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI\Services\GiftService.cs:line 80
   at TrickyTrayAPI.Controllers.GiftController.Update(UpdateGiftDTO gift, Int32 id) in C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI\Controllers\GiftController.cs:line 57
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-12-24 17:09:28.003 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7260/api/Gift/2 - 500 null text/plain; charset=utf-8 4967.983ms
2025-12-24 17:09:53.840 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 17:09:53.906 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 17:09:53.938 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 17:09:53.943 +02:00 [INF] Hosting environment: Development
2025-12-24 17:09:53.950 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 17:09:54.272 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 17:09:54.591 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 330.5882ms
2025-12-24 17:09:54.603 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 17:09:54.618 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 17:09:54.623 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 20.8362ms
2025-12-24 17:09:54.677 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 60.1974ms
2025-12-24 17:09:54.729 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 17:09:54.875 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 145.6511ms
2025-12-24 17:10:08.518 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7260/api/Gift/2 - application/json 68
2025-12-24 17:10:08.547 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.Update (TrickyTrayAPI)'
2025-12-24 17:10:08.628 +02:00 [INF] Route matched with {action = "Update", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.Models.Gift]] Update(TrickyTrayAPI.DTOs.UpdateGiftDTO, Int32) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 17:10:09.101 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.GiftController.Update (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 17:10:11.764 +02:00 [INF] Executed DbCommand (88ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Gifts] AS [g]
        WHERE [g].[Id] = @__id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-24 17:10:11.824 +02:00 [INF] check Exists gift 2
2025-12-24 17:10:12.154 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[Name], [g].[WinnerId], [c].[Id], [c].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[PhoneNumber], [u].[Id], [u].[Email], [u].[FirstName], [u].[GiftId], [u].[LastName], [u].[PhoneNumber], [u].[TypeCostumer]
FROM [Gifts] AS [g]
INNER JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Users] AS [u] ON [g].[WinnerId] = [u].[Id]
WHERE [g].[Id] = @__id_0
2025-12-24 17:10:12.483 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 200), @p1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Gifts] SET [Description] = @p0, [Name] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-12-24 17:10:12.527 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[Name], [g].[WinnerId], [c].[Id], [c].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[PhoneNumber], [u].[Id], [u].[Email], [u].[FirstName], [u].[GiftId], [u].[LastName], [u].[PhoneNumber], [u].[TypeCostumer]
FROM [Gifts] AS [g]
INNER JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Users] AS [u] ON [g].[WinnerId] = [u].[Id]
WHERE [g].[Id] = @__id_0
2025-12-24 17:10:12.546 +02:00 [INF] update gift 2
2025-12-24 17:10:12.571 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.GiftController.Update (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3458.007ms.
2025-12-24 17:10:12.593 +02:00 [INF] Executing OkObjectResult, writing value of type 'TrickyTrayAPI.DTOs.GetGiftDTO'.
2025-12-24 17:10:12.619 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.Update (TrickyTrayAPI) in 3982.4064ms
2025-12-24 17:10:12.625 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.Update (TrickyTrayAPI)'
2025-12-24 17:10:12.641 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7260/api/Gift/2 - 200 null application/json; charset=utf-8 4122.8878ms
2025-12-24 17:32:27.528 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 17:32:27.570 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 17:32:27.575 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 17:32:27.576 +02:00 [INF] Hosting environment: Development
2025-12-24 17:32:27.577 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 17:32:27.884 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 17:32:28.179 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 302.5372ms
2025-12-24 17:32:28.223 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 17:32:28.223 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 17:32:28.245 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 21.9455ms
2025-12-24 17:32:28.284 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 61.4376ms
2025-12-24 17:32:28.330 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 17:32:28.439 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 109.1542ms
2025-12-24 17:32:47.889 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7260/api/Categories - application/json 22
2025-12-24 17:32:47.923 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.CategoriesController.PostCategory (TrickyTrayAPI)'
2025-12-24 17:32:47.990 +02:00 [INF] Route matched with {action = "PostCategory", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.Models.Category]] PostCategory(TrickyTrayAPI.Models.Category) on controller TrickyTrayAPI.Controllers.CategoriesController (TrickyTrayAPI).
2025-12-24 17:32:48.011 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.CategoriesController.PostCategory (TrickyTrayAPI) in 6.6466ms
2025-12-24 17:32:48.016 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.CategoriesController.PostCategory (TrickyTrayAPI)'
2025-12-24 17:32:48.024 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'TrickyTrayAPI.Services.CategoryService' while attempting to activate 'TrickyTrayAPI.Controllers.CategoriesController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-12-24 17:32:48.101 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7260/api/Categories - 500 null text/plain; charset=utf-8 212.1648ms
2025-12-24 17:32:57.204 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Categories - null null
2025-12-24 17:32:57.218 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.CategoriesController.GetCategories (TrickyTrayAPI)'
2025-12-24 17:32:57.234 +02:00 [INF] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TrickyTrayAPI.Models.Category]]] GetCategories() on controller TrickyTrayAPI.Controllers.CategoriesController (TrickyTrayAPI).
2025-12-24 17:32:57.241 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.CategoriesController.GetCategories (TrickyTrayAPI) in 1.1842ms
2025-12-24 17:32:57.245 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.CategoriesController.GetCategories (TrickyTrayAPI)'
2025-12-24 17:32:57.250 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'TrickyTrayAPI.Services.CategoryService' while attempting to activate 'TrickyTrayAPI.Controllers.CategoriesController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method17(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-12-24 17:32:57.263 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Categories - 500 null text/plain; charset=utf-8 59.0697ms
2025-12-24 17:33:55.682 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 17:33:55.717 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 17:33:55.721 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 17:33:55.722 +02:00 [INF] Hosting environment: Development
2025-12-24 17:33:55.724 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 17:33:56.247 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 17:33:56.598 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 357.9557ms
2025-12-24 17:33:56.602 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 17:33:56.616 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 13.9234ms
2025-12-24 17:33:56.623 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 17:33:56.679 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 55.9655ms
2025-12-24 17:33:56.727 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 17:33:56.836 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 109.0827ms
2025-12-24 17:34:01.770 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Categories - null null
2025-12-24 17:34:01.801 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.CategoriesController.GetCategories (TrickyTrayAPI)'
2025-12-24 17:34:01.903 +02:00 [INF] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TrickyTrayAPI.Models.Category]]] GetCategories() on controller TrickyTrayAPI.Controllers.CategoriesController (TrickyTrayAPI).
2025-12-24 17:34:01.919 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.CategoriesController.GetCategories (TrickyTrayAPI) in 5.3427ms
2025-12-24 17:34:01.937 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.CategoriesController.GetCategories (TrickyTrayAPI)'
2025-12-24 17:34:01.948 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'TrickyTrayAPI.Services.ICategoryService' while attempting to activate 'TrickyTrayAPI.Controllers.CategoriesController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-12-24 17:34:02.017 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Categories - 500 null text/plain; charset=utf-8 246.3253ms
2025-12-24 17:36:49.518 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 17:36:49.555 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 17:36:49.564 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 17:36:49.566 +02:00 [INF] Hosting environment: Development
2025-12-24 17:36:49.567 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 17:36:50.235 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 17:36:50.541 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 313.6471ms
2025-12-24 17:36:50.590 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 17:36:50.590 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 17:36:50.611 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 21.1311ms
2025-12-24 17:36:50.653 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 62.7652ms
2025-12-24 17:36:50.697 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 17:36:50.922 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 225.496ms
2025-12-24 17:36:54.442 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Categories - null null
2025-12-24 17:36:54.478 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.CategoriesController.GetCategories (TrickyTrayAPI)'
2025-12-24 17:36:54.539 +02:00 [INF] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TrickyTrayAPI.Models.Category]]] GetCategories() on controller TrickyTrayAPI.Controllers.CategoriesController (TrickyTrayAPI).
2025-12-24 17:36:54.557 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.CategoriesController.GetCategories (TrickyTrayAPI) in 5.7789ms
2025-12-24 17:36:54.562 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.CategoriesController.GetCategories (TrickyTrayAPI)'
2025-12-24 17:36:54.571 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'TrickyTrayAPI.Services.ICategoryService' while attempting to activate 'TrickyTrayAPI.Controllers.CategoriesController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-12-24 17:36:54.664 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Categories - 500 null text/plain; charset=utf-8 222.5192ms
2025-12-24 17:38:03.782 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 17:38:03.816 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 17:38:03.821 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 17:38:03.823 +02:00 [INF] Hosting environment: Development
2025-12-24 17:38:03.825 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 17:38:04.199 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 17:38:04.473 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 279.2364ms
2025-12-24 17:38:04.548 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 17:38:04.548 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 17:38:04.581 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 37.3049ms
2025-12-24 17:38:04.626 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 82.3043ms
2025-12-24 17:38:04.671 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 17:38:04.785 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 115.1455ms
2025-12-24 17:38:08.065 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Categories - null null
2025-12-24 17:38:08.096 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.CategoriesController.GetCategories (TrickyTrayAPI)'
2025-12-24 17:38:08.154 +02:00 [INF] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TrickyTrayAPI.Models.Category]]] GetCategories() on controller TrickyTrayAPI.Controllers.CategoriesController (TrickyTrayAPI).
2025-12-24 17:38:08.579 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.CategoriesController.GetCategories (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 17:38:11.551 +02:00 [INF] Executed DbCommand (67ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name]
FROM [Categories] AS [c]
2025-12-24 17:38:11.736 +02:00 [INF] Successfully retrieved all categories
2025-12-24 17:38:11.754 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.CategoriesController.GetCategories (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3158.2087ms.
2025-12-24 17:38:11.775 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[TrickyTrayAPI.Models.Category, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-24 17:38:11.837 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.CategoriesController.GetCategories (TrickyTrayAPI) in 3672.5108ms
2025-12-24 17:38:11.854 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.CategoriesController.GetCategories (TrickyTrayAPI)'
2025-12-24 17:38:11.883 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Categories - 200 null application/json; charset=utf-8 3818.1224ms
2025-12-24 17:38:22.760 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7260/api/Categories - application/json 19
2025-12-24 17:38:22.772 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.CategoriesController.PostCategory (TrickyTrayAPI)'
2025-12-24 17:38:22.799 +02:00 [INF] Route matched with {action = "PostCategory", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.Models.Category]] PostCategory(TrickyTrayAPI.Models.Category) on controller TrickyTrayAPI.Controllers.CategoriesController (TrickyTrayAPI).
2025-12-24 17:38:22.944 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.CategoriesController.PostCategory (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 17:38:23.239 +02:00 [INF] Executed DbCommand (49ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Categories] ([Name])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2025-12-24 17:38:23.300 +02:00 [INF] Successfully added category with id 3
2025-12-24 17:38:23.312 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.CategoriesController.PostCategory (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.CreatedAtActionResult in 364.815ms.
2025-12-24 17:38:23.317 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'TrickyTrayAPI.Models.Category'.
2025-12-24 17:38:23.385 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.CategoriesController.PostCategory (TrickyTrayAPI) in 580.3892ms
2025-12-24 17:38:23.388 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.CategoriesController.PostCategory (TrickyTrayAPI)'
2025-12-24 17:38:23.390 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7260/api/Categories - 201 null application/json; charset=utf-8 630.4021ms
2025-12-24 17:38:33.192 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Categories/1 - null null
2025-12-24 17:38:33.207 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.CategoriesController.GetCategory (TrickyTrayAPI)'
2025-12-24 17:38:33.219 +02:00 [INF] Route matched with {action = "GetCategory", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.Models.Category]] GetCategory(Int32) on controller TrickyTrayAPI.Controllers.CategoriesController (TrickyTrayAPI).
2025-12-24 17:38:33.302 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.CategoriesController.GetCategory (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 17:38:33.688 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Name]
FROM [Categories] AS [c]
WHERE [c].[Id] = @__p_0
2025-12-24 17:38:33.708 +02:00 [INF] Successfully retrieved category with id 1
2025-12-24 17:38:33.715 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.CategoriesController.GetCategory (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 404.1635ms.
2025-12-24 17:38:33.720 +02:00 [INF] Executing OkObjectResult, writing value of type 'TrickyTrayAPI.Models.Category'.
2025-12-24 17:38:33.724 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.CategoriesController.GetCategory (TrickyTrayAPI) in 494.7582ms
2025-12-24 17:38:33.731 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.CategoriesController.GetCategory (TrickyTrayAPI)'
2025-12-24 17:38:33.734 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Categories/1 - 200 null application/json; charset=utf-8 543.6462ms
2025-12-24 17:38:49.597 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7260/api/Categories/2 - application/json 29
2025-12-24 17:38:49.613 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.CategoriesController.PutCategory (TrickyTrayAPI)'
2025-12-24 17:38:49.623 +02:00 [INF] Route matched with {action = "PutCategory", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PutCategory(Int32, TrickyTrayAPI.Models.Category) on controller TrickyTrayAPI.Controllers.CategoriesController (TrickyTrayAPI).
2025-12-24 17:38:49.659 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.CategoriesController.PutCategory (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 17:38:49.678 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Name]
FROM [Categories] AS [c]
WHERE [c].[Id] = @__p_0
2025-12-24 17:38:49.701 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Categories] SET [Name] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-12-24 17:38:49.710 +02:00 [INF] Successfully updated category with id 2
2025-12-24 17:38:49.721 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.CategoriesController.PutCategory (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.NoContentResult in 59.3548ms.
2025-12-24 17:38:49.742 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-12-24 17:38:49.748 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.CategoriesController.PutCategory (TrickyTrayAPI) in 120.7553ms
2025-12-24 17:38:49.753 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.CategoriesController.PutCategory (TrickyTrayAPI)'
2025-12-24 17:38:49.755 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7260/api/Categories/2 - 204 null null 158.026ms
2025-12-24 17:39:01.192 +02:00 [INF] Request starting HTTP/2 DELETE https://localhost:7260/api/Categories/1 - null null
2025-12-24 17:39:01.204 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.CategoriesController.DeleteCategory (TrickyTrayAPI)'
2025-12-24 17:39:01.212 +02:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteCategory(Int32) on controller TrickyTrayAPI.Controllers.CategoriesController (TrickyTrayAPI).
2025-12-24 17:39:01.264 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.CategoriesController.DeleteCategory (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 17:39:01.279 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Name]
FROM [Categories] AS [c]
WHERE [c].[Id] = @__p_0
2025-12-24 17:39:01.374 +02:00 [INF] Executed DbCommand (50ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [Id] = @p0;
2025-12-24 17:39:01.382 +02:00 [INF] Successfully deleted category with id 1
2025-12-24 17:39:01.383 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.CategoriesController.DeleteCategory (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.NoContentResult in 114.4152ms.
2025-12-24 17:39:01.385 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-12-24 17:39:01.386 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.CategoriesController.DeleteCategory (TrickyTrayAPI) in 170.3387ms
2025-12-24 17:39:01.388 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.CategoriesController.DeleteCategory (TrickyTrayAPI)'
2025-12-24 17:39:01.435 +02:00 [INF] Request finished HTTP/2 DELETE https://localhost:7260/api/Categories/1 - 204 null null 243.0025ms
2025-12-24 18:00:59.845 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 18:00:59.880 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 18:00:59.885 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 18:00:59.886 +02:00 [INF] Hosting environment: Development
2025-12-24 18:00:59.888 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 18:01:00.360 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 18:01:00.668 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 313.2846ms
2025-12-24 18:01:00.674 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 18:01:00.692 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 18:01:00.693 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 19.5105ms
2025-12-24 18:01:00.736 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 44.35ms
2025-12-24 18:01:00.795 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 18:01:00.959 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 163.7493ms
2025-12-24 18:01:09.096 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Purchases - null null
2025-12-24 18:01:09.126 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.PurchasesController.GetPurchases (TrickyTrayAPI)'
2025-12-24 18:01:09.206 +02:00 [INF] Route matched with {action = "GetPurchases", controller = "Purchases"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TrickyTrayAPI.DTOs.GetPurchaseDTO]]] GetPurchases() on controller TrickyTrayAPI.Controllers.PurchasesController (TrickyTrayAPI).
2025-12-24 18:01:09.637 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.PurchasesController.GetPurchases (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 18:01:12.839 +02:00 [INF] Executed DbCommand (91ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Date], [p].[Price], [p].[UserId]
FROM [Purchases] AS [p]
2025-12-24 18:01:12.895 +02:00 [INF] Successfully retrieved all purchases
2025-12-24 18:01:12.907 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.PurchasesController.GetPurchases (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3254.2588ms.
2025-12-24 18:01:12.930 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[TrickyTrayAPI.Models.Purchase, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[TrickyTrayAPI.DTOs.GetPurchaseDTO, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-24 18:01:12.991 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.PurchasesController.GetPurchases (TrickyTrayAPI) in 3764.1836ms
2025-12-24 18:01:12.996 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.PurchasesController.GetPurchases (TrickyTrayAPI)'
2025-12-24 18:01:13.010 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Purchases - 200 null application/json; charset=utf-8 3913.778ms
2025-12-24 18:02:46.979 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 18:02:47.014 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 18:02:47.018 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 18:02:47.020 +02:00 [INF] Hosting environment: Development
2025-12-24 18:02:47.023 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 18:02:47.437 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 18:02:47.736 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 306.1486ms
2025-12-24 18:02:47.787 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 18:02:47.787 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 18:02:47.813 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 26.2821ms
2025-12-24 18:02:47.841 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 53.6173ms
2025-12-24 18:02:47.881 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 18:02:48.006 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 125.0225ms
2025-12-24 18:04:38.411 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 18:04:38.440 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 18:04:38.443 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 18:04:38.445 +02:00 [INF] Hosting environment: Development
2025-12-24 18:04:38.446 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 18:04:39.360 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 18:04:39.963 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 606.6183ms
2025-12-24 18:04:39.997 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 18:04:39.997 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 18:04:40.009 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 12.9064ms
2025-12-24 18:04:40.068 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 71.2493ms
2025-12-24 18:04:40.124 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 18:04:40.393 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 269.0698ms
2025-12-24 18:04:57.774 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7260/api/Purchases - application/json 70
2025-12-24 18:04:57.807 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.PurchasesController.PostPurchase (TrickyTrayAPI)'
2025-12-24 18:04:57.895 +02:00 [INF] Route matched with {action = "PostPurchase", controller = "Purchases"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.DTOs.GetPurchaseDTO]] PostPurchase(TrickyTrayAPI.DTOs.CreatePurchaseDTO) on controller TrickyTrayAPI.Controllers.PurchasesController (TrickyTrayAPI).
2025-12-24 18:04:58.470 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.PurchasesController.PostPurchase (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 18:05:01.110 +02:00 [INF] Executed DbCommand (114ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Purchases] ([Date], [Price], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-12-24 18:05:01.230 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'WebApi.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Purchases_Users_UserId". The conflict occurred in database "DemoToTest", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:bf167baf-6c51-4c3d-9328-151bf4135878
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Purchases_Users_UserId". The conflict occurred in database "DemoToTest", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:bf167baf-6c51-4c3d-9328-151bf4135878
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-12-24 18:05:01.464 +02:00 [ERR] Error adding purchase
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Purchases_Users_UserId". The conflict occurred in database "DemoToTest", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:bf167baf-6c51-4c3d-9328-151bf4135878
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at TrickyTrayAPI.Repositories.PurchaseRepository.AddAsync(Purchase purchase) in C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI\Repositories\PurchaseRepository.cs:line 35
   at TrickyTrayAPI.Services.PurchaseService.AddAsync(CreatePurchaseDTO dto) in C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI\Services\PurchaseService.cs:line 82
2025-12-24 18:05:01.681 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.PurchasesController.PostPurchase (TrickyTrayAPI) in 3774.0666ms
2025-12-24 18:05:01.688 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.PurchasesController.PostPurchase (TrickyTrayAPI)'
2025-12-24 18:05:01.701 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Purchases_Users_UserId". The conflict occurred in database "DemoToTest", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:bf167baf-6c51-4c3d-9328-151bf4135878
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at TrickyTrayAPI.Repositories.PurchaseRepository.AddAsync(Purchase purchase) in C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI\Repositories\PurchaseRepository.cs:line 35
   at TrickyTrayAPI.Services.PurchaseService.AddAsync(CreatePurchaseDTO dto) in C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI\Services\PurchaseService.cs:line 82
   at TrickyTrayAPI.Controllers.PurchasesController.PostPurchase(CreatePurchaseDTO dto) in C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI\Controllers\PurchasesController.cs:line 44
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-12-24 18:05:01.749 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7260/api/Purchases - 500 null text/plain; charset=utf-8 3974.7896ms
2025-12-24 18:05:21.806 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7260/api/Purchases - application/json 70
2025-12-24 18:05:21.831 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.PurchasesController.PostPurchase (TrickyTrayAPI)'
2025-12-24 18:05:21.835 +02:00 [INF] Route matched with {action = "PostPurchase", controller = "Purchases"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.DTOs.GetPurchaseDTO]] PostPurchase(TrickyTrayAPI.DTOs.CreatePurchaseDTO) on controller TrickyTrayAPI.Controllers.PurchasesController (TrickyTrayAPI).
2025-12-24 18:05:21.892 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.PurchasesController.PostPurchase (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 18:05:22.031 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Purchases] ([Date], [Price], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-12-24 18:05:22.116 +02:00 [INF] Successfully added purchase with id 2
2025-12-24 18:05:22.131 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.PurchasesController.PostPurchase (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 223.0044ms.
2025-12-24 18:05:22.163 +02:00 [INF] Executing OkObjectResult, writing value of type 'TrickyTrayAPI.DTOs.GetPurchaseDTO'.
2025-12-24 18:05:22.188 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.PurchasesController.PostPurchase (TrickyTrayAPI) in 347.9673ms
2025-12-24 18:05:22.190 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.PurchasesController.PostPurchase (TrickyTrayAPI)'
2025-12-24 18:05:22.191 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7260/api/Purchases - 200 null application/json; charset=utf-8 386.3773ms
2025-12-24 18:05:33.166 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Purchases - null null
2025-12-24 18:05:33.174 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.PurchasesController.GetPurchases (TrickyTrayAPI)'
2025-12-24 18:05:33.185 +02:00 [INF] Route matched with {action = "GetPurchases", controller = "Purchases"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TrickyTrayAPI.DTOs.GetPurchaseDTO]]] GetPurchases() on controller TrickyTrayAPI.Controllers.PurchasesController (TrickyTrayAPI).
2025-12-24 18:05:33.245 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.PurchasesController.GetPurchases (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 18:05:33.691 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Date], [p].[Price], [p].[UserId]
FROM [Purchases] AS [p]
2025-12-24 18:05:33.717 +02:00 [INF] Successfully retrieved all purchases
2025-12-24 18:05:33.720 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.PurchasesController.GetPurchases (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 472.3985ms.
2025-12-24 18:05:33.723 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[TrickyTrayAPI.Models.Purchase, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[TrickyTrayAPI.DTOs.GetPurchaseDTO, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-24 18:05:33.738 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.PurchasesController.GetPurchases (TrickyTrayAPI) in 547.378ms
2025-12-24 18:05:33.741 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.PurchasesController.GetPurchases (TrickyTrayAPI)'
2025-12-24 18:05:33.743 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Purchases - 200 null application/json; charset=utf-8 578.4779ms
2025-12-24 18:05:47.675 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Purchases/1 - null null
2025-12-24 18:05:47.692 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.PurchasesController.GetPurchase (TrickyTrayAPI)'
2025-12-24 18:05:47.708 +02:00 [INF] Route matched with {action = "GetPurchase", controller = "Purchases"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.DTOs.GetPurchaseDTO]] GetPurchase(Int32) on controller TrickyTrayAPI.Controllers.PurchasesController (TrickyTrayAPI).
2025-12-24 18:05:47.746 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.PurchasesController.GetPurchase (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 18:05:48.026 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Date], [p].[Price], [p].[UserId]
FROM [Purchases] AS [p]
WHERE [p].[Id] = @__p_0
2025-12-24 18:05:48.032 +02:00 [WRN] Purchase with id 1 not found
2025-12-24 18:05:48.042 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.PurchasesController.GetPurchase (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.NotFoundResult in 293.3688ms.
2025-12-24 18:05:48.048 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-12-24 18:05:48.105 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.PurchasesController.GetPurchase (TrickyTrayAPI) in 389.935ms
2025-12-24 18:05:48.111 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.PurchasesController.GetPurchase (TrickyTrayAPI)'
2025-12-24 18:05:48.117 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Purchases/1 - 404 null application/problem+json; charset=utf-8 443.2094ms
2025-12-24 18:06:07.574 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Purchases/2 - null null
2025-12-24 18:06:07.607 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.PurchasesController.GetPurchase (TrickyTrayAPI)'
2025-12-24 18:06:07.612 +02:00 [INF] Route matched with {action = "GetPurchase", controller = "Purchases"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.DTOs.GetPurchaseDTO]] GetPurchase(Int32) on controller TrickyTrayAPI.Controllers.PurchasesController (TrickyTrayAPI).
2025-12-24 18:06:07.653 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.PurchasesController.GetPurchase (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 18:06:07.677 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Date], [p].[Price], [p].[UserId]
FROM [Purchases] AS [p]
WHERE [p].[Id] = @__p_0
2025-12-24 18:06:07.708 +02:00 [INF] Successfully retrieved purchase with id 2
2025-12-24 18:06:07.714 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.PurchasesController.GetPurchase (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 56.7485ms.
2025-12-24 18:06:07.723 +02:00 [INF] Executing OkObjectResult, writing value of type 'TrickyTrayAPI.DTOs.GetPurchaseDTO'.
2025-12-24 18:06:07.734 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.PurchasesController.GetPurchase (TrickyTrayAPI) in 115.5668ms
2025-12-24 18:06:07.746 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.PurchasesController.GetPurchase (TrickyTrayAPI)'
2025-12-24 18:06:07.757 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Purchases/2 - 200 null application/json; charset=utf-8 183.2154ms
2025-12-24 18:06:24.954 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7260/api/Purchases/2 - application/json 71
2025-12-24 18:06:24.961 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.PurchasesController.PutPurchase (TrickyTrayAPI)'
2025-12-24 18:06:24.968 +02:00 [INF] Route matched with {action = "PutPurchase", controller = "Purchases"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PutPurchase(Int32, TrickyTrayAPI.DTOs.CreatePurchaseDTO) on controller TrickyTrayAPI.Controllers.PurchasesController (TrickyTrayAPI).
2025-12-24 18:06:25.011 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.PurchasesController.PutPurchase (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 18:06:25.039 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Date], [p].[Price], [p].[UserId]
FROM [Purchases] AS [p]
WHERE [p].[Id] = @__p_0
2025-12-24 18:06:25.100 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Purchases] SET [Date] = @p0, [Price] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-12-24 18:06:25.107 +02:00 [INF] Successfully updated purchase with id 2
2025-12-24 18:06:25.110 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.PurchasesController.PutPurchase (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.NoContentResult in 95.161ms.
2025-12-24 18:06:25.120 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-12-24 18:06:25.122 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.PurchasesController.PutPurchase (TrickyTrayAPI) in 142.9892ms
2025-12-24 18:06:25.124 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.PurchasesController.PutPurchase (TrickyTrayAPI)'
2025-12-24 18:06:25.126 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7260/api/Purchases/2 - 204 null null 172.0581ms
2025-12-24 18:06:34.837 +02:00 [INF] Request starting HTTP/2 DELETE https://localhost:7260/api/Purchases/2 - null null
2025-12-24 18:06:34.863 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.PurchasesController.DeletePurchase (TrickyTrayAPI)'
2025-12-24 18:06:34.871 +02:00 [INF] Route matched with {action = "DeletePurchase", controller = "Purchases"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeletePurchase(Int32) on controller TrickyTrayAPI.Controllers.PurchasesController (TrickyTrayAPI).
2025-12-24 18:06:34.917 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.PurchasesController.DeletePurchase (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 18:06:34.941 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Date], [p].[Price], [p].[UserId]
FROM [Purchases] AS [p]
WHERE [p].[Id] = @__p_0
2025-12-24 18:06:34.986 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Purchases]
OUTPUT 1
WHERE [Id] = @p0;
2025-12-24 18:06:34.995 +02:00 [INF] Successfully deleted purchase with id 2
2025-12-24 18:06:34.997 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.PurchasesController.DeletePurchase (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.NoContentResult in 73.8923ms.
2025-12-24 18:06:34.999 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-12-24 18:06:35.000 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.PurchasesController.DeletePurchase (TrickyTrayAPI) in 125.7644ms
2025-12-24 18:06:35.001 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.PurchasesController.DeletePurchase (TrickyTrayAPI)'
2025-12-24 18:06:35.004 +02:00 [INF] Request finished HTTP/2 DELETE https://localhost:7260/api/Purchases/2 - 204 null null 166.3736ms
