<<<<<<< HEAD
2025-12-24 16:52:28.316 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 16:52:28.413 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 16:52:28.600 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 16:52:28.603 +02:00 [INF] Hosting environment: Development
2025-12-24 16:52:28.606 +02:00 [INF] Content root path: C:\Users\דיסלדורף\Desktop\יד\pp\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 16:52:28.988 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 16:52:28.988 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 16:52:29.027 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 52.1242ms
2025-12-24 16:52:29.222 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 248.4743ms
2025-12-24 16:52:29.284 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 16:52:29.501 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 217.7339ms
2025-12-24 16:54:37.147 +02:00 [INF] Executed DbCommand (238ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [DemoToTest_1];
2025-12-24 16:54:37.296 +02:00 [INF] Executed DbCommand (105ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [DemoToTest_1] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-12-24 16:54:37.311 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-24 16:54:37.316 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-12-24 16:54:37.337 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-12-24 16:54:37.388 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
=======
2025-12-24 16:54:16.607 +02:00 [INF] Executed DbCommand (259ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [DemoToTest];
2025-12-24 16:54:16.725 +02:00 [INF] Executed DbCommand (91ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [DemoToTest] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-12-24 16:54:16.738 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-24 16:54:16.742 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-12-24 16:54:16.788 +02:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-12-24 16:54:16.828 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
>>>>>>> a84c2f6f0f69036e23195aae43f0e7771f664f1b
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
<<<<<<< HEAD
2025-12-24 16:54:37.396 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-24 16:54:37.399 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-24 16:54:37.411 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-12-24 16:54:37.420 +02:00 [INF] Applying migration '20251221113435_InitialCreate'.
2025-12-24 16:54:37.446 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
=======
2025-12-24 16:54:16.836 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-24 16:54:16.838 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-24 16:54:16.852 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-12-24 16:54:16.859 +02:00 [INF] Applying migration '20251221113435_InitialCreate'.
2025-12-24 16:54:16.883 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
>>>>>>> a84c2f6f0f69036e23195aae43f0e7771f664f1b
CREATE TABLE [Categories] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Categories] PRIMARY KEY ([Id])
);
<<<<<<< HEAD
2025-12-24 16:54:37.451 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
=======
2025-12-24 16:54:16.902 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
>>>>>>> a84c2f6f0f69036e23195aae43f0e7771f664f1b
CREATE TABLE [Donors] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NULL,
    [Email] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Donors] PRIMARY KEY ([Id])
);
<<<<<<< HEAD
2025-12-24 16:54:37.454 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
=======
2025-12-24 16:54:16.908 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
>>>>>>> a84c2f6f0f69036e23195aae43f0e7771f664f1b
CREATE TABLE [CartItems] (
    [Id] int NOT NULL IDENTITY,
    [Quantity] int NOT NULL,
    [GiftId] int NOT NULL,
    [CartId] int NOT NULL,
    CONSTRAINT [PK_CartItems] PRIMARY KEY ([Id])
);
<<<<<<< HEAD
2025-12-24 16:54:37.458 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
=======
2025-12-24 16:54:16.913 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
>>>>>>> a84c2f6f0f69036e23195aae43f0e7771f664f1b
CREATE TABLE [Carts] (
    [Id] int NOT NULL IDENTITY,
    [CostumerId] int NOT NULL,
    CONSTRAINT [PK_Carts] PRIMARY KEY ([Id])
);
<<<<<<< HEAD
2025-12-24 16:54:37.461 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
=======
2025-12-24 16:54:16.917 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
>>>>>>> a84c2f6f0f69036e23195aae43f0e7771f664f1b
CREATE TABLE [Costumers] (
    [Id] int NOT NULL IDENTITY,
    [LastName] nvarchar(max) NOT NULL,
    [FirstName] nvarchar(max) NOT NULL,
    [Email] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NOT NULL,
    [TypeCostumer] int NOT NULL,
    [GiftId] int NULL,
    CONSTRAINT [PK_Costumers] PRIMARY KEY ([Id])
);
<<<<<<< HEAD
2025-12-24 16:54:37.466 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
=======
2025-12-24 16:54:16.924 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
>>>>>>> a84c2f6f0f69036e23195aae43f0e7771f664f1b
CREATE TABLE [Gifts] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [TypeGift] int NOT NULL,
    [DonorId] int NOT NULL,
    [CategoryId] int NOT NULL,
    [WinnerId] int NOT NULL,
    CONSTRAINT [PK_Gifts] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Gifts_Categories_CategoryId] FOREIGN KEY ([CategoryId]) REFERENCES [Categories] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Gifts_Costumers_WinnerId] FOREIGN KEY ([WinnerId]) REFERENCES [Costumers] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Gifts_Donors_DonorId] FOREIGN KEY ([DonorId]) REFERENCES [Donors] ([Id]) ON DELETE CASCADE
);
<<<<<<< HEAD
2025-12-24 16:54:37.471 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
=======
2025-12-24 16:54:16.929 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
>>>>>>> a84c2f6f0f69036e23195aae43f0e7771f664f1b
CREATE TABLE [Purchases] (
    [Id] int NOT NULL IDENTITY,
    [CostumerId] int NOT NULL,
    [Price] int NOT NULL,
    [Date] datetime2 NOT NULL,
    CONSTRAINT [PK_Purchases] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Purchases_Costumers_CostumerId] FOREIGN KEY ([CostumerId]) REFERENCES [Costumers] ([Id]) ON DELETE CASCADE
);
<<<<<<< HEAD
2025-12-24 16:54:37.476 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
=======
2025-12-24 16:54:16.936 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
>>>>>>> a84c2f6f0f69036e23195aae43f0e7771f664f1b
CREATE TABLE [PurchaseItems] (
    [Id] int NOT NULL IDENTITY,
    [GiftId] int NOT NULL,
    [IsWinner] bit NOT NULL,
    [CostumerId] int NOT NULL,
    [PurchaseId] int NULL,
    CONSTRAINT [PK_PurchaseItems] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PurchaseItems_Costumers_CostumerId] FOREIGN KEY ([CostumerId]) REFERENCES [Costumers] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_PurchaseItems_Gifts_GiftId] FOREIGN KEY ([GiftId]) REFERENCES [Gifts] ([Id]),
    CONSTRAINT [FK_PurchaseItems_Purchases_PurchaseId] FOREIGN KEY ([PurchaseId]) REFERENCES [Purchases] ([Id])
);
<<<<<<< HEAD
2025-12-24 16:54:37.481 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_CartItems_CartId] ON [CartItems] ([CartId]);
2025-12-24 16:54:37.484 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_CartItems_GiftId] ON [CartItems] ([GiftId]);
2025-12-24 16:54:37.487 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Carts_CostumerId] ON [Carts] ([CostumerId]);
2025-12-24 16:54:37.490 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Costumers_GiftId] ON [Costumers] ([GiftId]);
2025-12-24 16:54:37.493 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Gifts_CategoryId] ON [Gifts] ([CategoryId]);
2025-12-24 16:54:37.496 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Gifts_DonorId] ON [Gifts] ([DonorId]);
2025-12-24 16:54:37.499 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Gifts_WinnerId] ON [Gifts] ([WinnerId]);
2025-12-24 16:54:37.502 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PurchaseItems_CostumerId] ON [PurchaseItems] ([CostumerId]);
2025-12-24 16:54:37.505 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PurchaseItems_GiftId] ON [PurchaseItems] ([GiftId]);
2025-12-24 16:54:37.508 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PurchaseItems_PurchaseId] ON [PurchaseItems] ([PurchaseId]);
2025-12-24 16:54:37.510 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Purchases_CostumerId] ON [Purchases] ([CostumerId]);
2025-12-24 16:54:37.517 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [CartItems] ADD CONSTRAINT [FK_CartItems_Carts_CartId] FOREIGN KEY ([CartId]) REFERENCES [Carts] ([Id]) ON DELETE CASCADE;
2025-12-24 16:54:37.556 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [CartItems] ADD CONSTRAINT [FK_CartItems_Gifts_GiftId] FOREIGN KEY ([GiftId]) REFERENCES [Gifts] ([Id]);
2025-12-24 16:54:37.560 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Carts] ADD CONSTRAINT [FK_Carts_Costumers_CostumerId] FOREIGN KEY ([CostumerId]) REFERENCES [Costumers] ([Id]) ON DELETE CASCADE;
2025-12-24 16:54:37.564 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Costumers] ADD CONSTRAINT [FK_Costumers_Gifts_GiftId] FOREIGN KEY ([GiftId]) REFERENCES [Gifts] ([Id]);
2025-12-24 16:54:37.570 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251221113435_InitialCreate', N'9.0.11');
2025-12-24 16:54:37.572 +02:00 [INF] Applying migration '20251223155253_InitialCreated'.
2025-12-24 16:54:37.595 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Carts] DROP CONSTRAINT [FK_Carts_Costumers_CostumerId];
2025-12-24 16:54:37.601 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Gifts] DROP CONSTRAINT [FK_Gifts_Costumers_WinnerId];
2025-12-24 16:54:37.604 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [PurchaseItems] DROP CONSTRAINT [FK_PurchaseItems_Costumers_CostumerId];
2025-12-24 16:54:37.607 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Purchases] DROP CONSTRAINT [FK_Purchases_Costumers_CostumerId];
2025-12-24 16:54:37.612 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE [Costumers];
2025-12-24 16:54:38.036 +02:00 [INF] Executed DbCommand (421ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Purchases].[CostumerId]', N'UserId', 'COLUMN';
2025-12-24 16:54:38.042 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Purchases].[IX_Purchases_CostumerId]', N'IX_Purchases_UserId', 'INDEX';
2025-12-24 16:54:38.046 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[PurchaseItems].[CostumerId]', N'UserId', 'COLUMN';
2025-12-24 16:54:38.048 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[PurchaseItems].[IX_PurchaseItems_CostumerId]', N'IX_PurchaseItems_UserId', 'INDEX';
2025-12-24 16:54:38.051 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Carts].[CostumerId]', N'UserId', 'COLUMN';
2025-12-24 16:54:38.054 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Carts].[IX_Carts_CostumerId]', N'IX_Carts_UserId', 'INDEX';
2025-12-24 16:54:38.095 +02:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
=======
2025-12-24 16:54:16.945 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_CartItems_CartId] ON [CartItems] ([CartId]);
2025-12-24 16:54:16.948 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_CartItems_GiftId] ON [CartItems] ([GiftId]);
2025-12-24 16:54:16.951 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Carts_CostumerId] ON [Carts] ([CostumerId]);
2025-12-24 16:54:16.954 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Costumers_GiftId] ON [Costumers] ([GiftId]);
2025-12-24 16:54:16.959 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Gifts_CategoryId] ON [Gifts] ([CategoryId]);
2025-12-24 16:54:16.962 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Gifts_DonorId] ON [Gifts] ([DonorId]);
2025-12-24 16:54:16.964 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Gifts_WinnerId] ON [Gifts] ([WinnerId]);
2025-12-24 16:54:16.967 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PurchaseItems_CostumerId] ON [PurchaseItems] ([CostumerId]);
2025-12-24 16:54:16.970 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PurchaseItems_GiftId] ON [PurchaseItems] ([GiftId]);
2025-12-24 16:54:16.975 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PurchaseItems_PurchaseId] ON [PurchaseItems] ([PurchaseId]);
2025-12-24 16:54:16.978 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Purchases_CostumerId] ON [Purchases] ([CostumerId]);
2025-12-24 16:54:16.992 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [CartItems] ADD CONSTRAINT [FK_CartItems_Carts_CartId] FOREIGN KEY ([CartId]) REFERENCES [Carts] ([Id]) ON DELETE CASCADE;
2025-12-24 16:54:16.996 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [CartItems] ADD CONSTRAINT [FK_CartItems_Gifts_GiftId] FOREIGN KEY ([GiftId]) REFERENCES [Gifts] ([Id]);
2025-12-24 16:54:16.999 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Carts] ADD CONSTRAINT [FK_Carts_Costumers_CostumerId] FOREIGN KEY ([CostumerId]) REFERENCES [Costumers] ([Id]) ON DELETE CASCADE;
2025-12-24 16:54:17.003 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Costumers] ADD CONSTRAINT [FK_Costumers_Gifts_GiftId] FOREIGN KEY ([GiftId]) REFERENCES [Gifts] ([Id]);
2025-12-24 16:54:17.011 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251221113435_InitialCreate', N'9.0.11');
2025-12-24 16:54:17.012 +02:00 [INF] Applying migration '20251223155253_InitialCreated'.
2025-12-24 16:54:17.034 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Carts] DROP CONSTRAINT [FK_Carts_Costumers_CostumerId];
2025-12-24 16:54:17.038 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Gifts] DROP CONSTRAINT [FK_Gifts_Costumers_WinnerId];
2025-12-24 16:54:17.043 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [PurchaseItems] DROP CONSTRAINT [FK_PurchaseItems_Costumers_CostumerId];
2025-12-24 16:54:17.046 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Purchases] DROP CONSTRAINT [FK_Purchases_Costumers_CostumerId];
2025-12-24 16:54:17.051 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE [Costumers];
2025-12-24 16:54:17.600 +02:00 [INF] Executed DbCommand (547ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Purchases].[CostumerId]', N'UserId', 'COLUMN';
2025-12-24 16:54:17.605 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Purchases].[IX_Purchases_CostumerId]', N'IX_Purchases_UserId', 'INDEX';
2025-12-24 16:54:17.608 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[PurchaseItems].[CostumerId]', N'UserId', 'COLUMN';
2025-12-24 16:54:17.611 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[PurchaseItems].[IX_PurchaseItems_CostumerId]', N'IX_PurchaseItems_UserId', 'INDEX';
2025-12-24 16:54:17.613 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Carts].[CostumerId]', N'UserId', 'COLUMN';
2025-12-24 16:54:17.615 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Carts].[IX_Carts_CostumerId]', N'IX_Carts_UserId', 'INDEX';
2025-12-24 16:54:17.657 +02:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
>>>>>>> a84c2f6f0f69036e23195aae43f0e7771f664f1b
DECLARE @var sysname;
SELECT @var = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Donors]') AND [c].[name] = N'Name');
IF @var IS NOT NULL EXEC(N'ALTER TABLE [Donors] DROP CONSTRAINT [' + @var + '];');
ALTER TABLE [Donors] ALTER COLUMN [Name] nvarchar(100) NULL;
<<<<<<< HEAD
2025-12-24 16:54:38.123 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
=======
2025-12-24 16:54:17.689 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
>>>>>>> a84c2f6f0f69036e23195aae43f0e7771f664f1b
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Donors]') AND [c].[name] = N'Email');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Donors] DROP CONSTRAINT [' + @var1 + '];');
UPDATE [Donors] SET [Email] = N'' WHERE [Email] IS NULL;
ALTER TABLE [Donors] ALTER COLUMN [Email] nvarchar(max) NOT NULL;
ALTER TABLE [Donors] ADD DEFAULT N'' FOR [Email];
<<<<<<< HEAD
2025-12-24 16:54:38.129 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
=======
2025-12-24 16:54:17.694 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
>>>>>>> a84c2f6f0f69036e23195aae43f0e7771f664f1b
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [LastName] nvarchar(max) NOT NULL,
    [FirstName] nvarchar(max) NOT NULL,
    [Email] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NOT NULL,
    [TypeCostumer] int NOT NULL,
    [GiftId] int NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Users_Gifts_GiftId] FOREIGN KEY ([GiftId]) REFERENCES [Gifts] ([Id])
);
<<<<<<< HEAD
2025-12-24 16:54:38.132 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Users_GiftId] ON [Users] ([GiftId]);
2025-12-24 16:54:38.135 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Carts] ADD CONSTRAINT [FK_Carts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2025-12-24 16:54:38.138 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Gifts] ADD CONSTRAINT [FK_Gifts_Users_WinnerId] FOREIGN KEY ([WinnerId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2025-12-24 16:54:38.144 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [PurchaseItems] ADD CONSTRAINT [FK_PurchaseItems_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2025-12-24 16:54:38.147 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Purchases] ADD CONSTRAINT [FK_Purchases_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2025-12-24 16:54:38.149 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251223155253_InitialCreated', N'9.0.11');
2025-12-24 16:54:38.151 +02:00 [INF] Applying migration '20251223184055_InitialCreate5'.
2025-12-24 16:54:38.167 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Gifts] DROP CONSTRAINT [FK_Gifts_Users_WinnerId];
2025-12-24 16:54:38.193 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
=======
2025-12-24 16:54:17.696 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Users_GiftId] ON [Users] ([GiftId]);
2025-12-24 16:54:17.699 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Carts] ADD CONSTRAINT [FK_Carts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2025-12-24 16:54:17.702 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Gifts] ADD CONSTRAINT [FK_Gifts_Users_WinnerId] FOREIGN KEY ([WinnerId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2025-12-24 16:54:17.704 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [PurchaseItems] ADD CONSTRAINT [FK_PurchaseItems_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2025-12-24 16:54:17.708 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Purchases] ADD CONSTRAINT [FK_Purchases_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2025-12-24 16:54:17.709 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251223155253_InitialCreated', N'9.0.11');
2025-12-24 16:54:17.711 +02:00 [INF] Applying migration '20251223184055_InitialCreate5'.
2025-12-24 16:54:17.725 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Gifts] DROP CONSTRAINT [FK_Gifts_Users_WinnerId];
2025-12-24 16:54:17.752 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
>>>>>>> a84c2f6f0f69036e23195aae43f0e7771f664f1b
DECLARE @var2 sysname;
SELECT @var2 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Gifts]') AND [c].[name] = N'TypeGift');
IF @var2 IS NOT NULL EXEC(N'ALTER TABLE [Gifts] DROP CONSTRAINT [' + @var2 + '];');
ALTER TABLE [Gifts] DROP COLUMN [TypeGift];
<<<<<<< HEAD
2025-12-24 16:54:38.254 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
=======
2025-12-24 16:54:17.783 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
>>>>>>> a84c2f6f0f69036e23195aae43f0e7771f664f1b
DECLARE @var3 sysname;
SELECT @var3 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Gifts]') AND [c].[name] = N'WinnerId');
IF @var3 IS NOT NULL EXEC(N'ALTER TABLE [Gifts] DROP CONSTRAINT [' + @var3 + '];');
ALTER TABLE [Gifts] ALTER COLUMN [WinnerId] int NULL;
<<<<<<< HEAD
2025-12-24 16:54:38.280 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
=======
2025-12-24 16:54:17.810 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
>>>>>>> a84c2f6f0f69036e23195aae43f0e7771f664f1b
DECLARE @var4 sysname;
SELECT @var4 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Gifts]') AND [c].[name] = N'Name');
IF @var4 IS NOT NULL EXEC(N'ALTER TABLE [Gifts] DROP CONSTRAINT [' + @var4 + '];');
ALTER TABLE [Gifts] ALTER COLUMN [Name] nvarchar(100) NOT NULL;
<<<<<<< HEAD
2025-12-24 16:54:38.308 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
=======
2025-12-24 16:54:17.842 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
>>>>>>> a84c2f6f0f69036e23195aae43f0e7771f664f1b
DECLARE @var5 sysname;
SELECT @var5 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Gifts]') AND [c].[name] = N'Description');
IF @var5 IS NOT NULL EXEC(N'ALTER TABLE [Gifts] DROP CONSTRAINT [' + @var5 + '];');
ALTER TABLE [Gifts] ALTER COLUMN [Description] nvarchar(200) NOT NULL;
<<<<<<< HEAD
2025-12-24 16:54:38.314 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Gifts] ADD CONSTRAINT [FK_Gifts_Users_WinnerId] FOREIGN KEY ([WinnerId]) REFERENCES [Users] ([Id]);
2025-12-24 16:54:38.317 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251223184055_InitialCreate5', N'9.0.11');
2025-12-24 16:54:38.318 +02:00 [INF] Applying migration '20251224145417_init1'.
2025-12-24 16:54:38.326 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251224145417_init1', N'9.0.11');
2025-12-24 16:54:38.332 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-12-24 16:55:51.511 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 16:55:51.579 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 16:55:51.726 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 16:55:51.730 +02:00 [INF] Hosting environment: Development
2025-12-24 16:55:51.731 +02:00 [INF] Content root path: C:\Users\דיסלדורף\Desktop\יד\pp\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 16:55:51.951 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 16:55:51.951 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 16:55:51.989 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 46.8001ms
2025-12-24 16:55:52.044 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 102.4905ms
2025-12-24 16:55:52.099 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 16:55:52.309 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 210.7289ms
2025-12-24 16:55:55.304 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Donors - null null
2025-12-24 16:55:55.322 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.DonorsController.GetAll (TrickyTrayAPI)'
2025-12-24 16:55:55.369 +02:00 [INF] Route matched with {action = "GetAll", controller = "Donors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TrickyTrayAPI.DTOs.GetDonorDTO]]] GetAll() on controller TrickyTrayAPI.Controllers.DonorsController (TrickyTrayAPI).
2025-12-24 16:55:57.809 +02:00 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[PhoneNumber]
FROM [Donors] AS [d]
2025-12-24 16:55:57.864 +02:00 [INF] get donors
2025-12-24 16:55:57.895 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[TrickyTrayAPI.Models.Donor, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[TrickyTrayAPI.DTOs.GetDonorDTO, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-24 16:55:57.911 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.DonorsController.GetAll (TrickyTrayAPI) in 2533.6479ms
2025-12-24 16:55:57.914 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.DonorsController.GetAll (TrickyTrayAPI)'
2025-12-24 16:55:57.926 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Donors - 200 null application/json; charset=utf-8 2622.3961ms
2025-12-24 16:56:06.328 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Gift - null null
2025-12-24 16:56:06.342 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.GetAll (TrickyTrayAPI)'
2025-12-24 16:56:06.356 +02:00 [INF] Route matched with {action = "GetAll", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TrickyTrayAPI.DTOs.GetGiftDTO]]] GetAll() on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 16:56:06.652 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[Name], [g].[WinnerId], [c].[Id], [c].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[PhoneNumber], [u].[Id], [u].[Email], [u].[FirstName], [u].[GiftId], [u].[LastName], [u].[PhoneNumber], [u].[TypeCostumer]
FROM [Gifts] AS [g]
INNER JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Users] AS [u] ON [g].[WinnerId] = [u].[Id]
2025-12-24 16:56:06.658 +02:00 [INF] get gifts
2025-12-24 16:56:06.664 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[TrickyTrayAPI.Models.Gift, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[TrickyTrayAPI.DTOs.GetGiftDTO, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-24 16:56:06.669 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.GetAll (TrickyTrayAPI) in 302.3856ms
2025-12-24 16:56:06.674 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.GetAll (TrickyTrayAPI)'
2025-12-24 16:56:06.677 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Gift - 200 null application/json; charset=utf-8 348.613ms
2025-12-24 16:56:12.000 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7260/api/Gift - application/json 84
2025-12-24 16:56:12.016 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI)'
2025-12-24 16:56:12.038 +02:00 [INF] Route matched with {action = "Create", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.Models.Gift]] Create(TrickyTrayAPI.DTOs.CreateGiftDTO) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 16:56:12.546 +02:00 [INF] Executed DbCommand (51ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
=======
2025-12-24 16:54:17.845 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Gifts] ADD CONSTRAINT [FK_Gifts_Users_WinnerId] FOREIGN KEY ([WinnerId]) REFERENCES [Users] ([Id]);
2025-12-24 16:54:17.847 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251223184055_InitialCreate5', N'9.0.11');
2025-12-24 16:54:17.848 +02:00 [INF] Applying migration '20251224145401_initialCreate4'.
2025-12-24 16:54:17.854 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251224145401_initialCreate4', N'9.0.11');
2025-12-24 16:54:17.864 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-12-24 16:57:30.585 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 16:57:30.668 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 16:57:30.675 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 16:57:30.678 +02:00 [INF] Hosting environment: Development
2025-12-24 16:57:30.680 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 16:57:31.662 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 16:57:32.349 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 704.8815ms
2025-12-24 16:57:32.389 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 16:57:32.391 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 16:57:32.406 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 16.8025ms
2025-12-24 16:57:32.507 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 116.1635ms
2025-12-24 16:57:32.578 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 16:57:32.916 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 337.9627ms
2025-12-24 17:01:21.678 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 17:01:21.753 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 17:01:21.759 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 17:01:21.761 +02:00 [INF] Hosting environment: Development
2025-12-24 17:01:21.764 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 17:01:22.507 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 17:01:23.166 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 675.4354ms
2025-12-24 17:01:23.169 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 17:01:23.191 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 21.618ms
2025-12-24 17:01:23.201 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 17:01:23.311 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 110.8688ms
2025-12-24 17:01:23.394 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 17:01:23.693 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 298.9265ms
2025-12-24 17:01:47.310 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 17:01:47.344 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 17:01:47.349 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 17:01:47.351 +02:00 [INF] Hosting environment: Development
2025-12-24 17:01:47.353 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 17:01:47.936 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 17:01:48.318 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 395.8916ms
2025-12-24 17:01:48.323 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 17:01:48.336 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 13.3923ms
2025-12-24 17:01:48.341 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 17:01:48.389 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 48.2028ms
2025-12-24 17:01:48.435 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 17:01:48.629 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 193.6154ms
2025-12-24 17:02:41.722 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7260/api/Gift - application/json 84
2025-12-24 17:02:41.758 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI)'
2025-12-24 17:02:41.830 +02:00 [INF] Route matched with {action = "Create", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.Models.Gift]] Create(TrickyTrayAPI.DTOs.CreateGiftDTO) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 17:02:42.350 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 17:02:44.958 +02:00 [INF] Executed DbCommand (126ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
>>>>>>> a84c2f6f0f69036e23195aae43f0e7771f664f1b
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Gifts] ([CategoryId], [Description], [DonorId], [Name], [WinnerId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
<<<<<<< HEAD
2025-12-24 16:56:12.631 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'WebApi.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Gifts_Categories_CategoryId". The conflict occurred in database "DemoToTest_1", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:251da4b3-9509-492b-a28f-0c24ddea974d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Gifts_Categories_CategoryId". The conflict occurred in database "DemoToTest_1", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:251da4b3-9509-492b-a28f-0c24ddea974d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-12-24 16:56:12.842 +02:00 [ERR] cant create gift
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Gifts_Categories_CategoryId". The conflict occurred in database "DemoToTest_1", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:251da4b3-9509-492b-a28f-0c24ddea974d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at TrickyTrayAPI.Repositories.GiftRepository.AddAsync(CreateGiftDTO gift) in C:\Users\דיסלדורף\Desktop\יד\pp\TrickyTrayAPI\TrickyTrayAPI\Repositories\GiftRepository.cs:line 37
   at TrickyTrayAPI.Services.GiftService.AddAsync(CreateGiftDTO gift) in C:\Users\דיסלדורף\Desktop\יד\pp\TrickyTrayAPI\TrickyTrayAPI\Services\GiftService.cs:line 62
2025-12-24 16:56:13.042 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI) in 993.2818ms
2025-12-24 16:56:13.046 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI)'
2025-12-24 16:56:13.054 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Gifts_Categories_CategoryId". The conflict occurred in database "DemoToTest_1", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:251da4b3-9509-492b-a28f-0c24ddea974d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at TrickyTrayAPI.Repositories.GiftRepository.AddAsync(CreateGiftDTO gift) in C:\Users\דיסלדורף\Desktop\יד\pp\TrickyTrayAPI\TrickyTrayAPI\Repositories\GiftRepository.cs:line 37
   at TrickyTrayAPI.Services.GiftService.AddAsync(CreateGiftDTO gift) in C:\Users\דיסלדורף\Desktop\יד\pp\TrickyTrayAPI\TrickyTrayAPI\Services\GiftService.cs:line 62
   at TrickyTrayAPI.Controllers.GiftController.Create(CreateGiftDTO gift) in C:\Users\דיסלדורף\Desktop\יד\pp\TrickyTrayAPI\TrickyTrayAPI\Controllers\GiftController.cs:line 45
   at lambda_method74(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-12-24 16:56:13.096 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7260/api/Gift - 500 null text/plain; charset=utf-8 1096.0355ms
2025-12-24 16:57:10.026 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7260/api/Gift - application/json 84
2025-12-24 16:57:10.038 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI)'
2025-12-24 16:57:10.040 +02:00 [INF] Route matched with {action = "Create", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.Models.Gift]] Create(TrickyTrayAPI.DTOs.CreateGiftDTO) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 16:57:10.071 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Gifts] ([CategoryId], [Description], [DonorId], [Name], [WinnerId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-12-24 16:57:10.086 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'WebApi.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Gifts_Categories_CategoryId". The conflict occurred in database "DemoToTest_1", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:251da4b3-9509-492b-a28f-0c24ddea974d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Gifts_Categories_CategoryId". The conflict occurred in database "DemoToTest_1", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:251da4b3-9509-492b-a28f-0c24ddea974d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-12-24 16:57:10.209 +02:00 [ERR] cant create gift
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Gifts_Categories_CategoryId". The conflict occurred in database "DemoToTest_1", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:251da4b3-9509-492b-a28f-0c24ddea974d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at TrickyTrayAPI.Repositories.GiftRepository.AddAsync(CreateGiftDTO gift) in C:\Users\דיסלדורף\Desktop\יד\pp\TrickyTrayAPI\TrickyTrayAPI\Repositories\GiftRepository.cs:line 37
   at TrickyTrayAPI.Services.GiftService.AddAsync(CreateGiftDTO gift) in C:\Users\דיסלדורף\Desktop\יד\pp\TrickyTrayAPI\TrickyTrayAPI\Services\GiftService.cs:line 62
2025-12-24 16:57:10.318 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI) in 276.3009ms
2025-12-24 16:57:10.322 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI)'
2025-12-24 16:57:10.331 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Gifts_Categories_CategoryId". The conflict occurred in database "DemoToTest_1", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:251da4b3-9509-492b-a28f-0c24ddea974d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at TrickyTrayAPI.Repositories.GiftRepository.AddAsync(CreateGiftDTO gift) in C:\Users\דיסלדורף\Desktop\יד\pp\TrickyTrayAPI\TrickyTrayAPI\Repositories\GiftRepository.cs:line 37
   at TrickyTrayAPI.Services.GiftService.AddAsync(CreateGiftDTO gift) in C:\Users\דיסלדורף\Desktop\יד\pp\TrickyTrayAPI\TrickyTrayAPI\Services\GiftService.cs:line 62
   at TrickyTrayAPI.Controllers.GiftController.Create(CreateGiftDTO gift) in C:\Users\דיסלדורף\Desktop\יד\pp\TrickyTrayAPI\TrickyTrayAPI\Controllers\GiftController.cs:line 45
   at lambda_method74(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-12-24 16:57:10.362 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7260/api/Gift - 500 null text/plain; charset=utf-8 335.8061ms
2025-12-24 16:57:11.650 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7260/api/Gift - application/json 84
2025-12-24 16:57:11.658 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI)'
2025-12-24 16:57:11.661 +02:00 [INF] Route matched with {action = "Create", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.Models.Gift]] Create(TrickyTrayAPI.DTOs.CreateGiftDTO) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 16:57:11.669 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Gifts] ([CategoryId], [Description], [DonorId], [Name], [WinnerId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-12-24 16:57:11.683 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'WebApi.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Gifts_Categories_CategoryId". The conflict occurred in database "DemoToTest_1", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:251da4b3-9509-492b-a28f-0c24ddea974d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Gifts_Categories_CategoryId". The conflict occurred in database "DemoToTest_1", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:251da4b3-9509-492b-a28f-0c24ddea974d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-12-24 16:57:11.818 +02:00 [ERR] cant create gift
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Gifts_Categories_CategoryId". The conflict occurred in database "DemoToTest_1", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:251da4b3-9509-492b-a28f-0c24ddea974d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at TrickyTrayAPI.Repositories.GiftRepository.AddAsync(CreateGiftDTO gift) in C:\Users\דיסלדורף\Desktop\יד\pp\TrickyTrayAPI\TrickyTrayAPI\Repositories\GiftRepository.cs:line 37
   at TrickyTrayAPI.Services.GiftService.AddAsync(CreateGiftDTO gift) in C:\Users\דיסלדורף\Desktop\יד\pp\TrickyTrayAPI\TrickyTrayAPI\Services\GiftService.cs:line 62
2025-12-24 16:57:12.000 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI) in 336.0911ms
2025-12-24 16:57:12.010 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI)'
2025-12-24 16:57:12.017 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Gifts_Categories_CategoryId". The conflict occurred in database "DemoToTest_1", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:251da4b3-9509-492b-a28f-0c24ddea974d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at TrickyTrayAPI.Repositories.GiftRepository.AddAsync(CreateGiftDTO gift) in C:\Users\דיסלדורף\Desktop\יד\pp\TrickyTrayAPI\TrickyTrayAPI\Repositories\GiftRepository.cs:line 37
   at TrickyTrayAPI.Services.GiftService.AddAsync(CreateGiftDTO gift) in C:\Users\דיסלדורף\Desktop\יד\pp\TrickyTrayAPI\TrickyTrayAPI\Services\GiftService.cs:line 62
   at TrickyTrayAPI.Controllers.GiftController.Create(CreateGiftDTO gift) in C:\Users\דיסלדורף\Desktop\יד\pp\TrickyTrayAPI\TrickyTrayAPI\Controllers\GiftController.cs:line 45
   at lambda_method74(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-12-24 16:57:12.043 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7260/api/Gift - 500 null text/plain; charset=utf-8 392.8908ms
2025-12-24 17:01:08.958 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7260/api/Gift - application/json 85
2025-12-24 17:01:09.019 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI)'
2025-12-24 17:01:09.021 +02:00 [INF] Route matched with {action = "Create", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.Models.Gift]] Create(TrickyTrayAPI.DTOs.CreateGiftDTO) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 17:01:09.036 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Gifts] ([CategoryId], [Description], [DonorId], [Name], [WinnerId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-12-24 17:01:09.113 +02:00 [INF] create gift 4
2025-12-24 17:05:30.726 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 17:05:30.799 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 17:05:30.945 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 17:05:30.947 +02:00 [INF] Hosting environment: Development
2025-12-24 17:05:30.950 +02:00 [INF] Content root path: C:\Users\דיסלדורף\Desktop\יד\pp\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 17:05:31.584 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 17:05:31.584 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 17:05:31.635 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 61.8169ms
2025-12-24 17:05:31.688 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 116.5712ms
2025-12-24 17:05:31.737 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 17:05:31.956 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 219.8885ms
2025-12-24 17:05:49.391 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7260/api/Gift - application/json 84
2025-12-24 17:05:49.410 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI)'
2025-12-24 17:05:49.464 +02:00 [INF] Route matched with {action = "Create", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.Models.Gift]] Create(TrickyTrayAPI.DTOs.CreateGiftDTO) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 17:05:51.755 +02:00 [INF] Executed DbCommand (89ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Gifts] ([CategoryId], [Description], [DonorId], [Name], [WinnerId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-12-24 17:05:52.434 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
=======
2025-12-24 17:02:45.859 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@__g_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
>>>>>>> a84c2f6f0f69036e23195aae43f0e7771f664f1b
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[Name], [g].[WinnerId], [c].[Id], [c].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[PhoneNumber], [u].[Id], [u].[Email], [u].[FirstName], [u].[GiftId], [u].[LastName], [u].[PhoneNumber], [u].[TypeCostumer]
FROM [Gifts] AS [g]
INNER JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Users] AS [u] ON [g].[WinnerId] = [u].[Id]
<<<<<<< HEAD
WHERE [g].[Id] = @__id_0
2025-12-24 17:05:52.521 +02:00 [INF] create gift 5
2025-12-24 17:05:52.538 +02:00 [INF] Executing OkObjectResult, writing value of type 'TrickyTrayAPI.DTOs.GetGiftDTO'.
2025-12-24 17:05:52.554 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI) in 3058.7498ms
2025-12-24 17:05:52.559 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI)'
2025-12-24 17:05:52.574 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7260/api/Gift - 200 null application/json; charset=utf-8 3183.1908ms
2025-12-24 17:06:08.798 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7260/api/Gift - application/json 93
2025-12-24 17:06:08.809 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI)'
2025-12-24 17:06:08.812 +02:00 [INF] Route matched with {action = "Create", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.Models.Gift]] Create(TrickyTrayAPI.DTOs.CreateGiftDTO) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 17:06:08.913 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Gifts] ([CategoryId], [Description], [DonorId], [Name], [WinnerId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-12-24 17:06:08.928 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[Name], [g].[WinnerId], [c].[Id], [c].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[PhoneNumber], [u].[Id], [u].[Email], [u].[FirstName], [u].[GiftId], [u].[LastName], [u].[PhoneNumber], [u].[TypeCostumer]
FROM [Gifts] AS [g]
INNER JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Users] AS [u] ON [g].[WinnerId] = [u].[Id]
WHERE [g].[Id] = @__id_0
2025-12-24 17:06:08.947 +02:00 [INF] create gift 6
2025-12-24 17:06:08.952 +02:00 [INF] Executing OkObjectResult, writing value of type 'TrickyTrayAPI.DTOs.GetGiftDTO'.
2025-12-24 17:06:08.962 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI) in 145.8561ms
2025-12-24 17:06:08.966 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI)'
2025-12-24 17:06:08.967 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7260/api/Gift - 200 null application/json; charset=utf-8 169.2302ms
2025-12-24 17:06:18.195 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Gift - null null
2025-12-24 17:06:18.215 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.GetAll (TrickyTrayAPI)'
2025-12-24 17:06:18.223 +02:00 [INF] Route matched with {action = "GetAll", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TrickyTrayAPI.DTOs.GetGiftDTO]]] GetAll() on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 17:06:18.298 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[Name], [g].[WinnerId], [c].[Id], [c].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[PhoneNumber], [u].[Id], [u].[Email], [u].[FirstName], [u].[GiftId], [u].[LastName], [u].[PhoneNumber], [u].[TypeCostumer]
FROM [Gifts] AS [g]
INNER JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Users] AS [u] ON [g].[WinnerId] = [u].[Id]
2025-12-24 17:06:18.305 +02:00 [INF] get gifts
2025-12-24 17:06:18.307 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[TrickyTrayAPI.Models.Gift, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[TrickyTrayAPI.DTOs.GetGiftDTO, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-24 17:06:18.312 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.GetAll (TrickyTrayAPI) in 85.8897ms
2025-12-24 17:06:18.314 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.GetAll (TrickyTrayAPI)'
2025-12-24 17:06:18.316 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Gift - 200 null application/json; charset=utf-8 120.7568ms
2025-12-24 17:06:52.789 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7260/api/Gift - application/json 86
2025-12-24 17:06:52.794 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI)'
2025-12-24 17:06:52.796 +02:00 [INF] Route matched with {action = "Create", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.Models.Gift]] Create(TrickyTrayAPI.DTOs.CreateGiftDTO) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 17:06:52.810 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Gifts] ([CategoryId], [Description], [DonorId], [Name], [WinnerId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-12-24 17:06:52.822 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[Name], [g].[WinnerId], [c].[Id], [c].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[PhoneNumber], [u].[Id], [u].[Email], [u].[FirstName], [u].[GiftId], [u].[LastName], [u].[PhoneNumber], [u].[TypeCostumer]
FROM [Gifts] AS [g]
INNER JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Users] AS [u] ON [g].[WinnerId] = [u].[Id]
WHERE [g].[Id] = @__id_0
2025-12-24 17:06:52.827 +02:00 [INF] create gift 7
2025-12-24 17:06:52.828 +02:00 [INF] Executing OkObjectResult, writing value of type 'TrickyTrayAPI.DTOs.GetGiftDTO'.
2025-12-24 17:06:52.830 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI) in 30.7139ms
2025-12-24 17:06:52.833 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI)'
2025-12-24 17:06:52.834 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7260/api/Gift - 200 null application/json; charset=utf-8 46.0365ms
2025-12-24 17:06:57.349 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Gift - null null
2025-12-24 17:06:57.357 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.GetAll (TrickyTrayAPI)'
2025-12-24 17:06:57.360 +02:00 [INF] Route matched with {action = "GetAll", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TrickyTrayAPI.DTOs.GetGiftDTO]]] GetAll() on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 17:06:57.374 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[Name], [g].[WinnerId], [c].[Id], [c].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[PhoneNumber], [u].[Id], [u].[Email], [u].[FirstName], [u].[GiftId], [u].[LastName], [u].[PhoneNumber], [u].[TypeCostumer]
FROM [Gifts] AS [g]
INNER JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Users] AS [u] ON [g].[WinnerId] = [u].[Id]
2025-12-24 17:06:57.379 +02:00 [INF] get gifts
2025-12-24 17:06:57.381 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[TrickyTrayAPI.Models.Gift, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[TrickyTrayAPI.DTOs.GetGiftDTO, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-24 17:06:57.382 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.GetAll (TrickyTrayAPI) in 17.8082ms
2025-12-24 17:06:57.391 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.GetAll (TrickyTrayAPI)'
2025-12-24 17:06:57.393 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Gift - 200 null application/json; charset=utf-8 43.8729ms
2025-12-24 17:07:09.113 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Gift/3 - null null
2025-12-24 17:07:09.119 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.GetById (TrickyTrayAPI)'
2025-12-24 17:07:09.150 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.DTOs.GetGiftDTO]] GetById(Int32) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 17:07:09.186 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[Name], [g].[WinnerId], [c].[Id], [c].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[PhoneNumber], [u].[Id], [u].[Email], [u].[FirstName], [u].[GiftId], [u].[LastName], [u].[PhoneNumber], [u].[TypeCostumer]
FROM [Gifts] AS [g]
INNER JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Users] AS [u] ON [g].[WinnerId] = [u].[Id]
WHERE [g].[Id] = @__id_0
2025-12-24 17:07:09.194 +02:00 [INF] get gift by id 3
2025-12-24 17:07:42.615 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 17:07:42.686 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 17:07:42.879 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 17:07:42.882 +02:00 [INF] Hosting environment: Development
2025-12-24 17:07:42.887 +02:00 [INF] Content root path: C:\Users\דיסלדורף\Desktop\יד\pp\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 17:07:43.280 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 17:07:43.280 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 17:07:43.337 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 76.1352ms
2025-12-24 17:07:43.398 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 138.9344ms
2025-12-24 17:07:43.453 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 17:07:43.692 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 239.4017ms
2025-12-24 17:07:52.465 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Gift/2 - null null
2025-12-24 17:07:52.491 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.GetById (TrickyTrayAPI)'
2025-12-24 17:07:52.559 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.DTOs.GetGiftDTO]] GetById(Int32) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 17:07:55.123 +02:00 [INF] Executed DbCommand (77ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[Name], [g].[WinnerId], [c].[Id], [c].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[PhoneNumber], [u].[Id], [u].[Email], [u].[FirstName], [u].[GiftId], [u].[LastName], [u].[PhoneNumber], [u].[TypeCostumer]
FROM [Gifts] AS [g]
INNER JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Users] AS [u] ON [g].[WinnerId] = [u].[Id]
WHERE [g].[Id] = @__id_0
2025-12-24 17:07:55.174 +02:00 [INF] get gift by id 2
2025-12-24 17:08:30.964 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 17:08:31.048 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 17:08:31.209 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 17:08:31.210 +02:00 [INF] Hosting environment: Development
2025-12-24 17:08:31.212 +02:00 [INF] Content root path: C:\Users\דיסלדורף\Desktop\יד\pp\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 17:08:31.710 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 17:08:31.710 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 17:08:31.748 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 44.3466ms
2025-12-24 17:08:31.812 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 114.9658ms
2025-12-24 17:08:31.868 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 17:08:32.109 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 242.2389ms
2025-12-24 17:08:41.827 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Gift/4 - null null
2025-12-24 17:08:41.855 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.GetById (TrickyTrayAPI)'
2025-12-24 17:08:41.903 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.DTOs.GetGiftDTO]] GetById(Int32) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 17:08:44.554 +02:00 [INF] Executed DbCommand (95ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[Name], [g].[WinnerId], [c].[Id], [c].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[PhoneNumber], [u].[Id], [u].[Email], [u].[FirstName], [u].[GiftId], [u].[LastName], [u].[PhoneNumber], [u].[TypeCostumer]
FROM [Gifts] AS [g]
INNER JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Users] AS [u] ON [g].[WinnerId] = [u].[Id]
WHERE [g].[Id] = @__id_0
2025-12-24 17:08:44.727 +02:00 [INF] get gift by id 4
2025-12-24 17:08:44.767 +02:00 [INF] Executing OkObjectResult, writing value of type 'TrickyTrayAPI.DTOs.GetGiftDTO'.
2025-12-24 17:08:44.786 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.GetById (TrickyTrayAPI) in 2873.9482ms
2025-12-24 17:08:44.790 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.GetById (TrickyTrayAPI)'
2025-12-24 17:08:44.800 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Gift/4 - 200 null application/json; charset=utf-8 2973.5546ms
2025-12-24 17:08:52.944 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7260/api/Gift/4 - application/json 68
2025-12-24 17:08:52.956 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.Update (TrickyTrayAPI)'
2025-12-24 17:08:52.978 +02:00 [INF] Route matched with {action = "Update", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.Models.Gift]] Update(TrickyTrayAPI.DTOs.UpdateGiftDTO, Int32) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 17:08:53.131 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Gifts] AS [g]
        WHERE [g].[Id] = @__id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-24 17:08:53.138 +02:00 [INF] check Exists gift 4
2025-12-24 17:08:53.147 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[Name], [g].[WinnerId], [c].[Id], [c].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[PhoneNumber], [u].[Id], [u].[Email], [u].[FirstName], [u].[GiftId], [u].[LastName], [u].[PhoneNumber], [u].[TypeCostumer]
FROM [Gifts] AS [g]
INNER JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Users] AS [u] ON [g].[WinnerId] = [u].[Id]
WHERE [g].[Id] = @__id_0
2025-12-24 17:08:53.282 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Gifts] SET [CategoryId] = @p0, [Description] = @p1, [Name] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-12-24 17:08:53.379 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'WebApi.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Gifts_Categories_CategoryId". The conflict occurred in database "DemoToTest_1", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:ef5358a1-6c29-40ec-93fd-ff44aa85e4ea
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Gifts_Categories_CategoryId". The conflict occurred in database "DemoToTest_1", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:ef5358a1-6c29-40ec-93fd-ff44aa85e4ea
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-12-24 17:08:53.513 +02:00 [ERR] cant update gift 4
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Gifts_Categories_CategoryId". The conflict occurred in database "DemoToTest_1", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:ef5358a1-6c29-40ec-93fd-ff44aa85e4ea
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at TrickyTrayAPI.Repositories.GiftRepository.UpdateAsync(UpdateGiftDTO gift, Int32 id) in C:\Users\דיסלדורף\Desktop\יד\pp\TrickyTrayAPI\TrickyTrayAPI\Repositories\GiftRepository.cs:line 49
   at TrickyTrayAPI.Services.GiftService.UpdateAsync(UpdateGiftDTO gift, Int32 id) in C:\Users\דיסלדורף\Desktop\יד\pp\TrickyTrayAPI\TrickyTrayAPI\Services\GiftService.cs:line 80
2025-12-24 17:08:53.685 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.Update (TrickyTrayAPI) in 651.2957ms
2025-12-24 17:08:53.689 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.Update (TrickyTrayAPI)'
2025-12-24 17:08:53.697 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Gifts_Categories_CategoryId". The conflict occurred in database "DemoToTest_1", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:ef5358a1-6c29-40ec-93fd-ff44aa85e4ea
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at TrickyTrayAPI.Repositories.GiftRepository.UpdateAsync(UpdateGiftDTO gift, Int32 id) in C:\Users\דיסלדורף\Desktop\יד\pp\TrickyTrayAPI\TrickyTrayAPI\Repositories\GiftRepository.cs:line 49
   at TrickyTrayAPI.Services.GiftService.UpdateAsync(UpdateGiftDTO gift, Int32 id) in C:\Users\דיסלדורף\Desktop\יד\pp\TrickyTrayAPI\TrickyTrayAPI\Services\GiftService.cs:line 80
   at TrickyTrayAPI.Controllers.GiftController.Update(UpdateGiftDTO gift, Int32 id) in C:\Users\דיסלדורף\Desktop\יד\pp\TrickyTrayAPI\TrickyTrayAPI\Controllers\GiftController.cs:line 57
   at lambda_method172(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-12-24 17:08:53.731 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7260/api/Gift/4 - 500 null text/plain; charset=utf-8 787.2812ms
2025-12-24 17:09:11.983 +02:00 [INF] Request starting HTTP/2 DELETE https://localhost:7260/api/Gift/4 - null null
2025-12-24 17:09:11.991 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.Delete (TrickyTrayAPI)'
2025-12-24 17:09:11.998 +02:00 [INF] Route matched with {action = "Delete", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Delete(Int32) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 17:09:12.134 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[Name], [g].[WinnerId]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__p_0
2025-12-24 17:09:12.171 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
=======
WHERE [g].[Id] = @__g_Id_0
2025-12-24 17:02:45.950 +02:00 [INF] create gift 1
2025-12-24 17:02:45.964 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3603.2692ms.
2025-12-24 17:02:45.984 +02:00 [INF] Executing OkObjectResult, writing value of type 'TrickyTrayAPI.DTOs.GetGiftDTO'.
2025-12-24 17:02:46.011 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI) in 4167.6928ms
2025-12-24 17:02:46.015 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI)'
2025-12-24 17:02:46.033 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7260/api/Gift - 200 null application/json; charset=utf-8 4312.0259ms
2025-12-24 17:05:40.003 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 17:05:40.033 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 17:05:40.036 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 17:05:40.038 +02:00 [INF] Hosting environment: Development
2025-12-24 17:05:40.039 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 17:05:40.806 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 17:05:41.164 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 365.8051ms
2025-12-24 17:05:41.176 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 17:05:41.190 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 17:05:41.190 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 14.7598ms
2025-12-24 17:05:41.294 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 103.5935ms
2025-12-24 17:05:41.346 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 17:05:41.653 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 307.2115ms
2025-12-24 17:06:48.492 +02:00 [INF] Request starting HTTP/2 DELETE https://localhost:7260/api/Gift/1 - null null
2025-12-24 17:06:48.521 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.Delete (TrickyTrayAPI)'
2025-12-24 17:06:48.611 +02:00 [INF] Route matched with {action = "Delete", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Delete(Int32) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 17:06:49.048 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.GiftController.Delete (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 17:06:52.063 +02:00 [INF] Executed DbCommand (91ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[Name], [g].[WinnerId]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__p_0
2025-12-24 17:06:52.476 +02:00 [INF] Executed DbCommand (45ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
>>>>>>> a84c2f6f0f69036e23195aae43f0e7771f664f1b
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Gifts]
OUTPUT 1
WHERE [Id] = @p0;
<<<<<<< HEAD
2025-12-24 17:09:12.187 +02:00 [INF] delete gift 4
2025-12-24 17:09:12.194 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-12-24 17:09:12.197 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.Delete (TrickyTrayAPI) in 196.0615ms
2025-12-24 17:09:12.198 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.Delete (TrickyTrayAPI)'
2025-12-24 17:09:12.200 +02:00 [INF] Request finished HTTP/2 DELETE https://localhost:7260/api/Gift/4 - 204 null null 217.1806ms
2025-12-24 17:10:01.026 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 17:10:01.095 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 17:10:01.255 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 17:10:01.257 +02:00 [INF] Hosting environment: Development
2025-12-24 17:10:01.259 +02:00 [INF] Content root path: C:\Users\דיסלדורף\Desktop\יד\pp\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 17:10:01.614 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 17:10:01.614 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 17:10:01.653 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 51.3082ms
2025-12-24 17:10:01.710 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 108.9821ms
2025-12-24 17:10:01.769 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 17:10:02.041 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 272.3976ms
2025-12-24 17:10:18.576 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7260/api/Gift/4 - application/json 68
2025-12-24 17:10:18.606 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.Update (TrickyTrayAPI)'
2025-12-24 17:10:18.661 +02:00 [INF] Route matched with {action = "Update", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.Models.Gift]] Update(TrickyTrayAPI.DTOs.UpdateGiftDTO, Int32) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 17:10:21.139 +02:00 [INF] Executed DbCommand (87ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Gifts] AS [g]
        WHERE [g].[Id] = @__id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-24 17:10:21.182 +02:00 [INF] check Exists gift 4
2025-12-24 17:10:21.199 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-12-24 17:10:21.253 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.Update (TrickyTrayAPI) in 2581.5772ms
2025-12-24 17:10:21.257 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.Update (TrickyTrayAPI)'
2025-12-24 17:10:21.276 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7260/api/Gift/4 - 404 null application/problem+json; charset=utf-8 2699.6405ms
2025-12-24 17:10:41.357 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7260/api/Gift/6 - application/json 68
2025-12-24 17:10:41.371 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.Update (TrickyTrayAPI)'
2025-12-24 17:10:41.373 +02:00 [INF] Route matched with {action = "Update", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.Models.Gift]] Update(TrickyTrayAPI.DTOs.UpdateGiftDTO, Int32) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 17:10:41.424 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Gifts] AS [g]
        WHERE [g].[Id] = @__id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-24 17:10:41.433 +02:00 [INF] check Exists gift 6
2025-12-24 17:10:41.675 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
=======
2025-12-24 17:06:52.504 +02:00 [INF] delete gift 1
2025-12-24 17:06:52.515 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.GiftController.Delete (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.NoContentResult in 3457.9451ms.
2025-12-24 17:06:52.538 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-12-24 17:06:52.550 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.Delete (TrickyTrayAPI) in 3926.5332ms
2025-12-24 17:06:52.554 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.Delete (TrickyTrayAPI)'
2025-12-24 17:06:52.573 +02:00 [INF] Request finished HTTP/2 DELETE https://localhost:7260/api/Gift/1 - 204 null null 4080.7483ms
2025-12-24 17:07:16.207 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7260/api/Gift - application/json 85
2025-12-24 17:07:16.248 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI)'
2025-12-24 17:07:16.259 +02:00 [INF] Route matched with {action = "Create", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.Models.Gift]] Create(TrickyTrayAPI.DTOs.CreateGiftDTO) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 17:07:16.382 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 17:07:16.497 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Gifts] ([CategoryId], [Description], [DonorId], [Name], [WinnerId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-12-24 17:07:16.708 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__g_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[Name], [g].[WinnerId], [c].[Id], [c].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[PhoneNumber], [u].[Id], [u].[Email], [u].[FirstName], [u].[GiftId], [u].[LastName], [u].[PhoneNumber], [u].[TypeCostumer]
FROM [Gifts] AS [g]
INNER JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Users] AS [u] ON [g].[WinnerId] = [u].[Id]
WHERE [g].[Id] = @__g_Id_0
2025-12-24 17:07:16.767 +02:00 [INF] create gift 2
2025-12-24 17:07:16.773 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 387.875ms.
2025-12-24 17:07:16.797 +02:00 [INF] Executing OkObjectResult, writing value of type 'TrickyTrayAPI.DTOs.GetGiftDTO'.
2025-12-24 17:07:16.818 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI) in 553.2054ms
2025-12-24 17:07:16.821 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.Create (TrickyTrayAPI)'
2025-12-24 17:07:16.824 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7260/api/Gift - 200 null application/json; charset=utf-8 616.4274ms
2025-12-24 17:07:46.784 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Gift/2 - null null
2025-12-24 17:07:46.797 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.GetById (TrickyTrayAPI)'
2025-12-24 17:07:46.830 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.DTOs.GetGiftDTO]] GetById(Int32) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 17:07:46.889 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.GiftController.GetById (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 17:07:47.066 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
>>>>>>> a84c2f6f0f69036e23195aae43f0e7771f664f1b
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[Name], [g].[WinnerId], [c].[Id], [c].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[PhoneNumber], [u].[Id], [u].[Email], [u].[FirstName], [u].[GiftId], [u].[LastName], [u].[PhoneNumber], [u].[TypeCostumer]
FROM [Gifts] AS [g]
INNER JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Users] AS [u] ON [g].[WinnerId] = [u].[Id]
WHERE [g].[Id] = @__id_0
<<<<<<< HEAD
2025-12-24 17:10:41.943 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
=======
2025-12-24 17:07:47.086 +02:00 [INF] get gift by id 2
2025-12-24 17:07:47.088 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.GiftController.GetById (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 194.5758ms.
2025-12-24 17:07:47.094 +02:00 [INF] Executing OkObjectResult, writing value of type 'TrickyTrayAPI.DTOs.GetGiftDTO'.
2025-12-24 17:07:47.096 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.GetById (TrickyTrayAPI) in 256.0327ms
2025-12-24 17:07:47.114 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.GetById (TrickyTrayAPI)'
2025-12-24 17:07:47.116 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Gift/2 - 200 null application/json; charset=utf-8 331.8176ms
2025-12-24 17:08:23.231 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7260/api/Gift/2 - application/json 75
2025-12-24 17:08:23.250 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.Update (TrickyTrayAPI)'
2025-12-24 17:08:23.262 +02:00 [INF] Route matched with {action = "Update", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.Models.Gift]] Update(TrickyTrayAPI.DTOs.UpdateGiftDTO, Int32) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 17:08:23.295 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.GiftController.Update (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 17:08:23.343 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Gifts] AS [g]
        WHERE [g].[Id] = @__id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-24 17:08:23.360 +02:00 [INF] check Exists gift 2
2025-12-24 17:08:23.380 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[Name], [g].[WinnerId], [c].[Id], [c].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[PhoneNumber], [u].[Id], [u].[Email], [u].[FirstName], [u].[GiftId], [u].[LastName], [u].[PhoneNumber], [u].[TypeCostumer]
FROM [Gifts] AS [g]
INNER JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Users] AS [u] ON [g].[WinnerId] = [u].[Id]
WHERE [g].[Id] = @__id_0
2025-12-24 17:08:23.414 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
>>>>>>> a84c2f6f0f69036e23195aae43f0e7771f664f1b
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Gifts] SET [CategoryId] = @p0, [Description] = @p1, [Name] = @p2
OUTPUT 1
WHERE [Id] = @p3;
<<<<<<< HEAD
2025-12-24 17:10:41.989 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
=======
2025-12-24 17:08:23.425 +02:00 [INF] update gift 2
2025-12-24 17:09:04.686 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 17:09:04.724 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 17:09:04.728 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 17:09:04.730 +02:00 [INF] Hosting environment: Development
2025-12-24 17:09:04.731 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 17:09:05.545 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 17:09:05.992 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 452.3425ms
2025-12-24 17:09:06.041 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 17:09:06.041 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 17:09:06.061 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 20.0169ms
2025-12-24 17:09:06.135 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 94.1138ms
2025-12-24 17:09:06.180 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 17:09:06.436 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 257.3871ms
2025-12-24 17:09:23.036 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7260/api/Gift/2 - application/json 65
2025-12-24 17:09:23.059 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.Update (TrickyTrayAPI)'
2025-12-24 17:09:23.129 +02:00 [INF] Route matched with {action = "Update", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.Models.Gift]] Update(TrickyTrayAPI.DTOs.UpdateGiftDTO, Int32) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 17:09:23.676 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.GiftController.Update (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 17:09:26.458 +02:00 [INF] Executed DbCommand (103ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Gifts] AS [g]
        WHERE [g].[Id] = @__id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-24 17:09:26.512 +02:00 [INF] check Exists gift 2
2025-12-24 17:09:26.859 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
>>>>>>> a84c2f6f0f69036e23195aae43f0e7771f664f1b
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[Name], [g].[WinnerId], [c].[Id], [c].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[PhoneNumber], [u].[Id], [u].[Email], [u].[FirstName], [u].[GiftId], [u].[LastName], [u].[PhoneNumber], [u].[TypeCostumer]
FROM [Gifts] AS [g]
INNER JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Users] AS [u] ON [g].[WinnerId] = [u].[Id]
WHERE [g].[Id] = @__id_0
<<<<<<< HEAD
2025-12-24 17:10:41.996 +02:00 [INF] update gift 6
2025-12-24 17:10:42.001 +02:00 [INF] Executing OkObjectResult, writing value of type 'TrickyTrayAPI.DTOs.GetGiftDTO'.
2025-12-24 17:10:42.009 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.Update (TrickyTrayAPI) in 632.1486ms
2025-12-24 17:10:42.013 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.Update (TrickyTrayAPI)'
2025-12-24 17:10:42.015 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7260/api/Gift/6 - 200 null application/json; charset=utf-8 659.5222ms
2025-12-24 17:47:10.225 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 17:47:10.297 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 17:47:10.458 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 17:47:10.463 +02:00 [INF] Hosting environment: Development
2025-12-24 17:47:10.465 +02:00 [INF] Content root path: C:\Users\דיסלדורף\Desktop\יד\pp\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 17:47:10.886 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 17:47:10.886 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 17:47:10.935 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 59.0496ms
2025-12-24 17:47:11.006 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 131.0947ms
2025-12-24 17:47:11.062 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 17:47:11.260 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 198.4242ms
2025-12-24 17:51:59.861 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 17:51:59.932 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 17:52:00.124 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 17:52:00.127 +02:00 [INF] Hosting environment: Development
2025-12-24 17:52:00.128 +02:00 [INF] Content root path: C:\Users\דיסלדורף\Desktop\יד\pp\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 17:52:00.381 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 17:52:00.381 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 17:52:00.455 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 84.11ms
2025-12-24 17:52:00.513 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 145.534ms
2025-12-24 17:52:00.574 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 17:52:00.800 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 226.4553ms
2025-12-24 17:52:06.308 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Cart/3 - null null
2025-12-24 17:52:06.323 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.CartController.GetCart (TrickyTrayAPI)'
2025-12-24 17:52:06.362 +02:00 [INF] Route matched with {action = "GetCart", controller = "Cart"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.Repositories.CartDto] GetCart(Int32) on controller TrickyTrayAPI.Controllers.CartController (TrickyTrayAPI).
2025-12-24 17:52:06.377 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.CartController.GetCart (TrickyTrayAPI) in 4.9404ms
2025-12-24 17:52:06.381 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.CartController.GetCart (TrickyTrayAPI)'
2025-12-24 17:52:06.386 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'TrickyTrayAPI.Services.CartService' while attempting to activate 'TrickyTrayAPI.Controllers.CartController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method3(Closure, IServiceProvider, Object[])
=======
2025-12-24 17:09:27.395 +02:00 [INF] Executed DbCommand (99ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Gifts] SET [CategoryId] = @p0, [Description] = @p1, [Name] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-12-24 17:09:27.516 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'WebApi.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Gifts_Categories_CategoryId". The conflict occurred in database "DemoToTest", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:94f4e9a9-afdc-4047-8800-e69c530263d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Gifts_Categories_CategoryId". The conflict occurred in database "DemoToTest", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:94f4e9a9-afdc-4047-8800-e69c530263d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-12-24 17:09:27.719 +02:00 [ERR] cant update gift 2
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Gifts_Categories_CategoryId". The conflict occurred in database "DemoToTest", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:94f4e9a9-afdc-4047-8800-e69c530263d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at TrickyTrayAPI.Repositories.GiftRepository.UpdateAsync(UpdateGiftDTO gift, Int32 id) in C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI\Repositories\GiftRepository.cs:line 45
   at TrickyTrayAPI.Services.GiftService.UpdateAsync(UpdateGiftDTO gift, Int32 id) in C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI\Services\GiftService.cs:line 80
2025-12-24 17:09:27.924 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.Update (TrickyTrayAPI) in 4785.5544ms
2025-12-24 17:09:27.930 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.Update (TrickyTrayAPI)'
2025-12-24 17:09:27.939 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Gifts_Categories_CategoryId". The conflict occurred in database "DemoToTest", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:94f4e9a9-afdc-4047-8800-e69c530263d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at TrickyTrayAPI.Repositories.GiftRepository.UpdateAsync(UpdateGiftDTO gift, Int32 id) in C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI\Repositories\GiftRepository.cs:line 45
   at TrickyTrayAPI.Services.GiftService.UpdateAsync(UpdateGiftDTO gift, Int32 id) in C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI\Services\GiftService.cs:line 80
   at TrickyTrayAPI.Controllers.GiftController.Update(UpdateGiftDTO gift, Int32 id) in C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI\Controllers\GiftController.cs:line 57
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-12-24 17:09:28.003 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7260/api/Gift/2 - 500 null text/plain; charset=utf-8 4967.983ms
2025-12-24 17:09:53.840 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 17:09:53.906 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 17:09:53.938 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 17:09:53.943 +02:00 [INF] Hosting environment: Development
2025-12-24 17:09:53.950 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 17:09:54.272 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 17:09:54.591 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 330.5882ms
2025-12-24 17:09:54.603 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 17:09:54.618 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 17:09:54.623 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 20.8362ms
2025-12-24 17:09:54.677 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 60.1974ms
2025-12-24 17:09:54.729 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 17:09:54.875 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 145.6511ms
2025-12-24 17:10:08.518 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7260/api/Gift/2 - application/json 68
2025-12-24 17:10:08.547 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.Update (TrickyTrayAPI)'
2025-12-24 17:10:08.628 +02:00 [INF] Route matched with {action = "Update", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.Models.Gift]] Update(TrickyTrayAPI.DTOs.UpdateGiftDTO, Int32) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 17:10:09.101 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.GiftController.Update (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 17:10:11.764 +02:00 [INF] Executed DbCommand (88ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Gifts] AS [g]
        WHERE [g].[Id] = @__id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-24 17:10:11.824 +02:00 [INF] check Exists gift 2
2025-12-24 17:10:12.154 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[Name], [g].[WinnerId], [c].[Id], [c].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[PhoneNumber], [u].[Id], [u].[Email], [u].[FirstName], [u].[GiftId], [u].[LastName], [u].[PhoneNumber], [u].[TypeCostumer]
FROM [Gifts] AS [g]
INNER JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Users] AS [u] ON [g].[WinnerId] = [u].[Id]
WHERE [g].[Id] = @__id_0
2025-12-24 17:10:12.483 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 200), @p1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Gifts] SET [Description] = @p0, [Name] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-12-24 17:10:12.527 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[Name], [g].[WinnerId], [c].[Id], [c].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[PhoneNumber], [u].[Id], [u].[Email], [u].[FirstName], [u].[GiftId], [u].[LastName], [u].[PhoneNumber], [u].[TypeCostumer]
FROM [Gifts] AS [g]
INNER JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Users] AS [u] ON [g].[WinnerId] = [u].[Id]
WHERE [g].[Id] = @__id_0
2025-12-24 17:10:12.546 +02:00 [INF] update gift 2
2025-12-24 17:10:12.571 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.GiftController.Update (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3458.007ms.
2025-12-24 17:10:12.593 +02:00 [INF] Executing OkObjectResult, writing value of type 'TrickyTrayAPI.DTOs.GetGiftDTO'.
2025-12-24 17:10:12.619 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.Update (TrickyTrayAPI) in 3982.4064ms
2025-12-24 17:10:12.625 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.Update (TrickyTrayAPI)'
2025-12-24 17:10:12.641 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7260/api/Gift/2 - 200 null application/json; charset=utf-8 4122.8878ms
2025-12-24 17:32:27.528 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 17:32:27.570 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 17:32:27.575 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 17:32:27.576 +02:00 [INF] Hosting environment: Development
2025-12-24 17:32:27.577 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 17:32:27.884 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 17:32:28.179 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 302.5372ms
2025-12-24 17:32:28.223 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 17:32:28.223 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 17:32:28.245 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 21.9455ms
2025-12-24 17:32:28.284 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 61.4376ms
2025-12-24 17:32:28.330 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 17:32:28.439 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 109.1542ms
2025-12-24 17:32:47.889 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7260/api/Categories - application/json 22
2025-12-24 17:32:47.923 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.CategoriesController.PostCategory (TrickyTrayAPI)'
2025-12-24 17:32:47.990 +02:00 [INF] Route matched with {action = "PostCategory", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.Models.Category]] PostCategory(TrickyTrayAPI.Models.Category) on controller TrickyTrayAPI.Controllers.CategoriesController (TrickyTrayAPI).
2025-12-24 17:32:48.011 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.CategoriesController.PostCategory (TrickyTrayAPI) in 6.6466ms
2025-12-24 17:32:48.016 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.CategoriesController.PostCategory (TrickyTrayAPI)'
2025-12-24 17:32:48.024 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'TrickyTrayAPI.Services.CategoryService' while attempting to activate 'TrickyTrayAPI.Controllers.CategoriesController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
>>>>>>> a84c2f6f0f69036e23195aae43f0e7771f664f1b
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
<<<<<<< HEAD
2025-12-24 17:52:06.435 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Cart/3 - 500 null text/plain; charset=utf-8 127.4753ms
2025-12-24 18:06:16.410 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-24 18:06:16.446 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-12-24 18:06:16.463 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-12-24 18:06:16.515 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-12-24 18:06:16.524 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-24 18:06:16.528 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-24 18:06:16.535 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-12-24 18:06:16.544 +02:00 [INF] Applying migration '20251224160559_init2'.
2025-12-24 18:06:16.565 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [CartItems] DROP CONSTRAINT [FK_CartItems_Carts_CartId];
2025-12-24 18:06:16.574 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE [Carts];
2025-12-24 18:06:16.876 +02:00 [INF] Executed DbCommand (298ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[CartItems].[CartId]', N'UserId', 'COLUMN';
2025-12-24 18:06:16.879 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[CartItems].[IX_CartItems_CartId]', N'IX_CartItems_UserId', 'INDEX';
2025-12-24 18:06:16.883 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [CartItems] ADD CONSTRAINT [FK_CartItems_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2025-12-24 18:06:16.885 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251224160559_init2', N'9.0.11');
2025-12-24 18:06:16.889 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
=======
2025-12-24 17:32:48.101 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7260/api/Categories - 500 null text/plain; charset=utf-8 212.1648ms
2025-12-24 17:32:57.204 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Categories - null null
2025-12-24 17:32:57.218 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.CategoriesController.GetCategories (TrickyTrayAPI)'
2025-12-24 17:32:57.234 +02:00 [INF] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TrickyTrayAPI.Models.Category]]] GetCategories() on controller TrickyTrayAPI.Controllers.CategoriesController (TrickyTrayAPI).
2025-12-24 17:32:57.241 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.CategoriesController.GetCategories (TrickyTrayAPI) in 1.1842ms
2025-12-24 17:32:57.245 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.CategoriesController.GetCategories (TrickyTrayAPI)'
2025-12-24 17:32:57.250 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'TrickyTrayAPI.Services.CategoryService' while attempting to activate 'TrickyTrayAPI.Controllers.CategoriesController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method17(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-12-24 17:32:57.263 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Categories - 500 null text/plain; charset=utf-8 59.0697ms
2025-12-24 17:33:55.682 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 17:33:55.717 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 17:33:55.721 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 17:33:55.722 +02:00 [INF] Hosting environment: Development
2025-12-24 17:33:55.724 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 17:33:56.247 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 17:33:56.598 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 357.9557ms
2025-12-24 17:33:56.602 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 17:33:56.616 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 13.9234ms
2025-12-24 17:33:56.623 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 17:33:56.679 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 55.9655ms
2025-12-24 17:33:56.727 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 17:33:56.836 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 109.0827ms
2025-12-24 17:34:01.770 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Categories - null null
2025-12-24 17:34:01.801 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.CategoriesController.GetCategories (TrickyTrayAPI)'
2025-12-24 17:34:01.903 +02:00 [INF] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TrickyTrayAPI.Models.Category]]] GetCategories() on controller TrickyTrayAPI.Controllers.CategoriesController (TrickyTrayAPI).
2025-12-24 17:34:01.919 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.CategoriesController.GetCategories (TrickyTrayAPI) in 5.3427ms
2025-12-24 17:34:01.937 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.CategoriesController.GetCategories (TrickyTrayAPI)'
2025-12-24 17:34:01.948 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'TrickyTrayAPI.Services.ICategoryService' while attempting to activate 'TrickyTrayAPI.Controllers.CategoriesController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-12-24 17:34:02.017 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Categories - 500 null text/plain; charset=utf-8 246.3253ms
2025-12-24 17:36:49.518 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 17:36:49.555 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 17:36:49.564 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 17:36:49.566 +02:00 [INF] Hosting environment: Development
2025-12-24 17:36:49.567 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 17:36:50.235 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 17:36:50.541 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 313.6471ms
2025-12-24 17:36:50.590 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 17:36:50.590 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 17:36:50.611 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 21.1311ms
2025-12-24 17:36:50.653 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 62.7652ms
2025-12-24 17:36:50.697 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 17:36:50.922 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 225.496ms
2025-12-24 17:36:54.442 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Categories - null null
2025-12-24 17:36:54.478 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.CategoriesController.GetCategories (TrickyTrayAPI)'
2025-12-24 17:36:54.539 +02:00 [INF] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TrickyTrayAPI.Models.Category]]] GetCategories() on controller TrickyTrayAPI.Controllers.CategoriesController (TrickyTrayAPI).
2025-12-24 17:36:54.557 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.CategoriesController.GetCategories (TrickyTrayAPI) in 5.7789ms
2025-12-24 17:36:54.562 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.CategoriesController.GetCategories (TrickyTrayAPI)'
2025-12-24 17:36:54.571 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'TrickyTrayAPI.Services.ICategoryService' while attempting to activate 'TrickyTrayAPI.Controllers.CategoriesController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-12-24 17:36:54.664 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Categories - 500 null text/plain; charset=utf-8 222.5192ms
2025-12-24 17:38:03.782 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 17:38:03.816 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 17:38:03.821 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 17:38:03.823 +02:00 [INF] Hosting environment: Development
2025-12-24 17:38:03.825 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 17:38:04.199 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 17:38:04.473 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 279.2364ms
2025-12-24 17:38:04.548 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 17:38:04.548 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 17:38:04.581 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 37.3049ms
2025-12-24 17:38:04.626 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 82.3043ms
2025-12-24 17:38:04.671 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 17:38:04.785 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 115.1455ms
2025-12-24 17:38:08.065 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Categories - null null
2025-12-24 17:38:08.096 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.CategoriesController.GetCategories (TrickyTrayAPI)'
2025-12-24 17:38:08.154 +02:00 [INF] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TrickyTrayAPI.Models.Category]]] GetCategories() on controller TrickyTrayAPI.Controllers.CategoriesController (TrickyTrayAPI).
2025-12-24 17:38:08.579 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.CategoriesController.GetCategories (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 17:38:11.551 +02:00 [INF] Executed DbCommand (67ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name]
FROM [Categories] AS [c]
2025-12-24 17:38:11.736 +02:00 [INF] Successfully retrieved all categories
2025-12-24 17:38:11.754 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.CategoriesController.GetCategories (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3158.2087ms.
2025-12-24 17:38:11.775 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[TrickyTrayAPI.Models.Category, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-24 17:38:11.837 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.CategoriesController.GetCategories (TrickyTrayAPI) in 3672.5108ms
2025-12-24 17:38:11.854 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.CategoriesController.GetCategories (TrickyTrayAPI)'
2025-12-24 17:38:11.883 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Categories - 200 null application/json; charset=utf-8 3818.1224ms
2025-12-24 17:38:22.760 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7260/api/Categories - application/json 19
2025-12-24 17:38:22.772 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.CategoriesController.PostCategory (TrickyTrayAPI)'
2025-12-24 17:38:22.799 +02:00 [INF] Route matched with {action = "PostCategory", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.Models.Category]] PostCategory(TrickyTrayAPI.Models.Category) on controller TrickyTrayAPI.Controllers.CategoriesController (TrickyTrayAPI).
2025-12-24 17:38:22.944 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.CategoriesController.PostCategory (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 17:38:23.239 +02:00 [INF] Executed DbCommand (49ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Categories] ([Name])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2025-12-24 17:38:23.300 +02:00 [INF] Successfully added category with id 3
2025-12-24 17:38:23.312 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.CategoriesController.PostCategory (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.CreatedAtActionResult in 364.815ms.
2025-12-24 17:38:23.317 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'TrickyTrayAPI.Models.Category'.
2025-12-24 17:38:23.385 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.CategoriesController.PostCategory (TrickyTrayAPI) in 580.3892ms
2025-12-24 17:38:23.388 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.CategoriesController.PostCategory (TrickyTrayAPI)'
2025-12-24 17:38:23.390 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7260/api/Categories - 201 null application/json; charset=utf-8 630.4021ms
2025-12-24 17:38:33.192 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Categories/1 - null null
2025-12-24 17:38:33.207 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.CategoriesController.GetCategory (TrickyTrayAPI)'
2025-12-24 17:38:33.219 +02:00 [INF] Route matched with {action = "GetCategory", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.Models.Category]] GetCategory(Int32) on controller TrickyTrayAPI.Controllers.CategoriesController (TrickyTrayAPI).
2025-12-24 17:38:33.302 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.CategoriesController.GetCategory (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 17:38:33.688 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Name]
FROM [Categories] AS [c]
WHERE [c].[Id] = @__p_0
2025-12-24 17:38:33.708 +02:00 [INF] Successfully retrieved category with id 1
2025-12-24 17:38:33.715 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.CategoriesController.GetCategory (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 404.1635ms.
2025-12-24 17:38:33.720 +02:00 [INF] Executing OkObjectResult, writing value of type 'TrickyTrayAPI.Models.Category'.
2025-12-24 17:38:33.724 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.CategoriesController.GetCategory (TrickyTrayAPI) in 494.7582ms
2025-12-24 17:38:33.731 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.CategoriesController.GetCategory (TrickyTrayAPI)'
2025-12-24 17:38:33.734 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Categories/1 - 200 null application/json; charset=utf-8 543.6462ms
2025-12-24 17:38:49.597 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7260/api/Categories/2 - application/json 29
2025-12-24 17:38:49.613 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.CategoriesController.PutCategory (TrickyTrayAPI)'
2025-12-24 17:38:49.623 +02:00 [INF] Route matched with {action = "PutCategory", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PutCategory(Int32, TrickyTrayAPI.Models.Category) on controller TrickyTrayAPI.Controllers.CategoriesController (TrickyTrayAPI).
2025-12-24 17:38:49.659 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.CategoriesController.PutCategory (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 17:38:49.678 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Name]
FROM [Categories] AS [c]
WHERE [c].[Id] = @__p_0
2025-12-24 17:38:49.701 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Categories] SET [Name] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-12-24 17:38:49.710 +02:00 [INF] Successfully updated category with id 2
2025-12-24 17:38:49.721 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.CategoriesController.PutCategory (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.NoContentResult in 59.3548ms.
2025-12-24 17:38:49.742 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-12-24 17:38:49.748 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.CategoriesController.PutCategory (TrickyTrayAPI) in 120.7553ms
2025-12-24 17:38:49.753 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.CategoriesController.PutCategory (TrickyTrayAPI)'
2025-12-24 17:38:49.755 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7260/api/Categories/2 - 204 null null 158.026ms
2025-12-24 17:39:01.192 +02:00 [INF] Request starting HTTP/2 DELETE https://localhost:7260/api/Categories/1 - null null
2025-12-24 17:39:01.204 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.CategoriesController.DeleteCategory (TrickyTrayAPI)'
2025-12-24 17:39:01.212 +02:00 [INF] Route matched with {action = "DeleteCategory", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteCategory(Int32) on controller TrickyTrayAPI.Controllers.CategoriesController (TrickyTrayAPI).
2025-12-24 17:39:01.264 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.CategoriesController.DeleteCategory (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 17:39:01.279 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Name]
FROM [Categories] AS [c]
WHERE [c].[Id] = @__p_0
2025-12-24 17:39:01.374 +02:00 [INF] Executed DbCommand (50ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [Id] = @p0;
2025-12-24 17:39:01.382 +02:00 [INF] Successfully deleted category with id 1
2025-12-24 17:39:01.383 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.CategoriesController.DeleteCategory (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.NoContentResult in 114.4152ms.
2025-12-24 17:39:01.385 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-12-24 17:39:01.386 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.CategoriesController.DeleteCategory (TrickyTrayAPI) in 170.3387ms
2025-12-24 17:39:01.388 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.CategoriesController.DeleteCategory (TrickyTrayAPI)'
2025-12-24 17:39:01.435 +02:00 [INF] Request finished HTTP/2 DELETE https://localhost:7260/api/Categories/1 - 204 null null 243.0025ms
2025-12-24 18:00:59.845 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 18:00:59.880 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 18:00:59.885 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 18:00:59.886 +02:00 [INF] Hosting environment: Development
2025-12-24 18:00:59.888 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 18:01:00.360 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 18:01:00.668 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 313.2846ms
2025-12-24 18:01:00.674 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 18:01:00.692 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 18:01:00.693 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 19.5105ms
2025-12-24 18:01:00.736 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 44.35ms
2025-12-24 18:01:00.795 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 18:01:00.959 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 163.7493ms
2025-12-24 18:01:09.096 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Purchases - null null
2025-12-24 18:01:09.126 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.PurchasesController.GetPurchases (TrickyTrayAPI)'
2025-12-24 18:01:09.206 +02:00 [INF] Route matched with {action = "GetPurchases", controller = "Purchases"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TrickyTrayAPI.DTOs.GetPurchaseDTO]]] GetPurchases() on controller TrickyTrayAPI.Controllers.PurchasesController (TrickyTrayAPI).
2025-12-24 18:01:09.637 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.PurchasesController.GetPurchases (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 18:01:12.839 +02:00 [INF] Executed DbCommand (91ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Date], [p].[Price], [p].[UserId]
FROM [Purchases] AS [p]
2025-12-24 18:01:12.895 +02:00 [INF] Successfully retrieved all purchases
2025-12-24 18:01:12.907 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.PurchasesController.GetPurchases (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3254.2588ms.
2025-12-24 18:01:12.930 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[TrickyTrayAPI.Models.Purchase, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[TrickyTrayAPI.DTOs.GetPurchaseDTO, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-24 18:01:12.991 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.PurchasesController.GetPurchases (TrickyTrayAPI) in 3764.1836ms
2025-12-24 18:01:12.996 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.PurchasesController.GetPurchases (TrickyTrayAPI)'
2025-12-24 18:01:13.010 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Purchases - 200 null application/json; charset=utf-8 3913.778ms
2025-12-24 18:02:46.979 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 18:02:47.014 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 18:02:47.018 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 18:02:47.020 +02:00 [INF] Hosting environment: Development
2025-12-24 18:02:47.023 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 18:02:47.437 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 18:02:47.736 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 306.1486ms
2025-12-24 18:02:47.787 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 18:02:47.787 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 18:02:47.813 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 26.2821ms
2025-12-24 18:02:47.841 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 53.6173ms
2025-12-24 18:02:47.881 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 18:02:48.006 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 125.0225ms
2025-12-24 18:04:38.411 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 18:04:38.440 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 18:04:38.443 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 18:04:38.445 +02:00 [INF] Hosting environment: Development
2025-12-24 18:04:38.446 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 18:04:39.360 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 18:04:39.963 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 606.6183ms
2025-12-24 18:04:39.997 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 18:04:39.997 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 18:04:40.009 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 12.9064ms
2025-12-24 18:04:40.068 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 71.2493ms
2025-12-24 18:04:40.124 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 18:04:40.393 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 269.0698ms
2025-12-24 18:04:57.774 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7260/api/Purchases - application/json 70
2025-12-24 18:04:57.807 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.PurchasesController.PostPurchase (TrickyTrayAPI)'
2025-12-24 18:04:57.895 +02:00 [INF] Route matched with {action = "PostPurchase", controller = "Purchases"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.DTOs.GetPurchaseDTO]] PostPurchase(TrickyTrayAPI.DTOs.CreatePurchaseDTO) on controller TrickyTrayAPI.Controllers.PurchasesController (TrickyTrayAPI).
2025-12-24 18:04:58.470 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.PurchasesController.PostPurchase (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 18:05:01.110 +02:00 [INF] Executed DbCommand (114ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Purchases] ([Date], [Price], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-12-24 18:05:01.230 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'WebApi.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Purchases_Users_UserId". The conflict occurred in database "DemoToTest", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:bf167baf-6c51-4c3d-9328-151bf4135878
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Purchases_Users_UserId". The conflict occurred in database "DemoToTest", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:bf167baf-6c51-4c3d-9328-151bf4135878
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-12-24 18:05:01.464 +02:00 [ERR] Error adding purchase
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Purchases_Users_UserId". The conflict occurred in database "DemoToTest", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:bf167baf-6c51-4c3d-9328-151bf4135878
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at TrickyTrayAPI.Repositories.PurchaseRepository.AddAsync(Purchase purchase) in C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI\Repositories\PurchaseRepository.cs:line 35
   at TrickyTrayAPI.Services.PurchaseService.AddAsync(CreatePurchaseDTO dto) in C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI\Services\PurchaseService.cs:line 82
2025-12-24 18:05:01.681 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.PurchasesController.PostPurchase (TrickyTrayAPI) in 3774.0666ms
2025-12-24 18:05:01.688 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.PurchasesController.PostPurchase (TrickyTrayAPI)'
2025-12-24 18:05:01.701 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Purchases_Users_UserId". The conflict occurred in database "DemoToTest", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:bf167baf-6c51-4c3d-9328-151bf4135878
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at TrickyTrayAPI.Repositories.PurchaseRepository.AddAsync(Purchase purchase) in C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI\Repositories\PurchaseRepository.cs:line 35
   at TrickyTrayAPI.Services.PurchaseService.AddAsync(CreatePurchaseDTO dto) in C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI\Services\PurchaseService.cs:line 82
   at TrickyTrayAPI.Controllers.PurchasesController.PostPurchase(CreatePurchaseDTO dto) in C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI\Controllers\PurchasesController.cs:line 44
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-12-24 18:05:01.749 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7260/api/Purchases - 500 null text/plain; charset=utf-8 3974.7896ms
2025-12-24 18:05:21.806 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7260/api/Purchases - application/json 70
2025-12-24 18:05:21.831 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.PurchasesController.PostPurchase (TrickyTrayAPI)'
2025-12-24 18:05:21.835 +02:00 [INF] Route matched with {action = "PostPurchase", controller = "Purchases"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.DTOs.GetPurchaseDTO]] PostPurchase(TrickyTrayAPI.DTOs.CreatePurchaseDTO) on controller TrickyTrayAPI.Controllers.PurchasesController (TrickyTrayAPI).
2025-12-24 18:05:21.892 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.PurchasesController.PostPurchase (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 18:05:22.031 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Purchases] ([Date], [Price], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-12-24 18:05:22.116 +02:00 [INF] Successfully added purchase with id 2
2025-12-24 18:05:22.131 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.PurchasesController.PostPurchase (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 223.0044ms.
2025-12-24 18:05:22.163 +02:00 [INF] Executing OkObjectResult, writing value of type 'TrickyTrayAPI.DTOs.GetPurchaseDTO'.
2025-12-24 18:05:22.188 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.PurchasesController.PostPurchase (TrickyTrayAPI) in 347.9673ms
2025-12-24 18:05:22.190 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.PurchasesController.PostPurchase (TrickyTrayAPI)'
2025-12-24 18:05:22.191 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7260/api/Purchases - 200 null application/json; charset=utf-8 386.3773ms
2025-12-24 18:05:33.166 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Purchases - null null
2025-12-24 18:05:33.174 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.PurchasesController.GetPurchases (TrickyTrayAPI)'
2025-12-24 18:05:33.185 +02:00 [INF] Route matched with {action = "GetPurchases", controller = "Purchases"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TrickyTrayAPI.DTOs.GetPurchaseDTO]]] GetPurchases() on controller TrickyTrayAPI.Controllers.PurchasesController (TrickyTrayAPI).
2025-12-24 18:05:33.245 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.PurchasesController.GetPurchases (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 18:05:33.691 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Date], [p].[Price], [p].[UserId]
FROM [Purchases] AS [p]
2025-12-24 18:05:33.717 +02:00 [INF] Successfully retrieved all purchases
2025-12-24 18:05:33.720 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.PurchasesController.GetPurchases (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 472.3985ms.
2025-12-24 18:05:33.723 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[TrickyTrayAPI.Models.Purchase, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[TrickyTrayAPI.DTOs.GetPurchaseDTO, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-24 18:05:33.738 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.PurchasesController.GetPurchases (TrickyTrayAPI) in 547.378ms
2025-12-24 18:05:33.741 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.PurchasesController.GetPurchases (TrickyTrayAPI)'
2025-12-24 18:05:33.743 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Purchases - 200 null application/json; charset=utf-8 578.4779ms
2025-12-24 18:05:47.675 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Purchases/1 - null null
2025-12-24 18:05:47.692 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.PurchasesController.GetPurchase (TrickyTrayAPI)'
2025-12-24 18:05:47.708 +02:00 [INF] Route matched with {action = "GetPurchase", controller = "Purchases"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.DTOs.GetPurchaseDTO]] GetPurchase(Int32) on controller TrickyTrayAPI.Controllers.PurchasesController (TrickyTrayAPI).
2025-12-24 18:05:47.746 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.PurchasesController.GetPurchase (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 18:05:48.026 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Date], [p].[Price], [p].[UserId]
FROM [Purchases] AS [p]
WHERE [p].[Id] = @__p_0
2025-12-24 18:05:48.032 +02:00 [WRN] Purchase with id 1 not found
2025-12-24 18:05:48.042 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.PurchasesController.GetPurchase (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.NotFoundResult in 293.3688ms.
2025-12-24 18:05:48.048 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-12-24 18:05:48.105 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.PurchasesController.GetPurchase (TrickyTrayAPI) in 389.935ms
2025-12-24 18:05:48.111 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.PurchasesController.GetPurchase (TrickyTrayAPI)'
2025-12-24 18:05:48.117 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Purchases/1 - 404 null application/problem+json; charset=utf-8 443.2094ms
2025-12-24 18:06:07.574 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Purchases/2 - null null
2025-12-24 18:06:07.607 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.PurchasesController.GetPurchase (TrickyTrayAPI)'
2025-12-24 18:06:07.612 +02:00 [INF] Route matched with {action = "GetPurchase", controller = "Purchases"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.DTOs.GetPurchaseDTO]] GetPurchase(Int32) on controller TrickyTrayAPI.Controllers.PurchasesController (TrickyTrayAPI).
2025-12-24 18:06:07.653 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.PurchasesController.GetPurchase (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 18:06:07.677 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Date], [p].[Price], [p].[UserId]
FROM [Purchases] AS [p]
WHERE [p].[Id] = @__p_0
2025-12-24 18:06:07.708 +02:00 [INF] Successfully retrieved purchase with id 2
2025-12-24 18:06:07.714 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.PurchasesController.GetPurchase (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 56.7485ms.
2025-12-24 18:06:07.723 +02:00 [INF] Executing OkObjectResult, writing value of type 'TrickyTrayAPI.DTOs.GetPurchaseDTO'.
2025-12-24 18:06:07.734 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.PurchasesController.GetPurchase (TrickyTrayAPI) in 115.5668ms
2025-12-24 18:06:07.746 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.PurchasesController.GetPurchase (TrickyTrayAPI)'
2025-12-24 18:06:07.757 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Purchases/2 - 200 null application/json; charset=utf-8 183.2154ms
2025-12-24 18:06:24.954 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7260/api/Purchases/2 - application/json 71
2025-12-24 18:06:24.961 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.PurchasesController.PutPurchase (TrickyTrayAPI)'
2025-12-24 18:06:24.968 +02:00 [INF] Route matched with {action = "PutPurchase", controller = "Purchases"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PutPurchase(Int32, TrickyTrayAPI.DTOs.CreatePurchaseDTO) on controller TrickyTrayAPI.Controllers.PurchasesController (TrickyTrayAPI).
2025-12-24 18:06:25.011 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.PurchasesController.PutPurchase (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 18:06:25.039 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Date], [p].[Price], [p].[UserId]
FROM [Purchases] AS [p]
WHERE [p].[Id] = @__p_0
2025-12-24 18:06:25.100 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Purchases] SET [Date] = @p0, [Price] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-12-24 18:06:25.107 +02:00 [INF] Successfully updated purchase with id 2
2025-12-24 18:06:25.110 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.PurchasesController.PutPurchase (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.NoContentResult in 95.161ms.
2025-12-24 18:06:25.120 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-12-24 18:06:25.122 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.PurchasesController.PutPurchase (TrickyTrayAPI) in 142.9892ms
2025-12-24 18:06:25.124 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.PurchasesController.PutPurchase (TrickyTrayAPI)'
2025-12-24 18:06:25.126 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7260/api/Purchases/2 - 204 null null 172.0581ms
2025-12-24 18:06:34.837 +02:00 [INF] Request starting HTTP/2 DELETE https://localhost:7260/api/Purchases/2 - null null
2025-12-24 18:06:34.863 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.PurchasesController.DeletePurchase (TrickyTrayAPI)'
2025-12-24 18:06:34.871 +02:00 [INF] Route matched with {action = "DeletePurchase", controller = "Purchases"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeletePurchase(Int32) on controller TrickyTrayAPI.Controllers.PurchasesController (TrickyTrayAPI).
2025-12-24 18:06:34.917 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.PurchasesController.DeletePurchase (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 18:06:34.941 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Date], [p].[Price], [p].[UserId]
FROM [Purchases] AS [p]
WHERE [p].[Id] = @__p_0
2025-12-24 18:06:34.986 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Purchases]
OUTPUT 1
WHERE [Id] = @p0;
2025-12-24 18:06:34.995 +02:00 [INF] Successfully deleted purchase with id 2
2025-12-24 18:06:34.997 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.PurchasesController.DeletePurchase (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.NoContentResult in 73.8923ms.
2025-12-24 18:06:34.999 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-12-24 18:06:35.000 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.PurchasesController.DeletePurchase (TrickyTrayAPI) in 125.7644ms
2025-12-24 18:06:35.001 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.PurchasesController.DeletePurchase (TrickyTrayAPI)'
2025-12-24 18:06:35.004 +02:00 [INF] Request finished HTTP/2 DELETE https://localhost:7260/api/Purchases/2 - 204 null null 166.3736ms
>>>>>>> a84c2f6f0f69036e23195aae43f0e7771f664f1b
2025-12-24 18:13:40.976 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 18:13:41.054 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 18:13:41.227 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 18:13:41.230 +02:00 [INF] Hosting environment: Development
2025-12-24 18:13:41.235 +02:00 [INF] Content root path: C:\Users\דיסלדורף\Desktop\יד\pp\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 18:13:41.592 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 18:13:41.592 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 18:13:41.659 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 81.5769ms
2025-12-24 18:13:42.604 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 1029.176ms
2025-12-24 18:13:42.663 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 18:13:42.873 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 210.2123ms
2025-12-24 18:25:57.961 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 18:25:58.032 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 18:25:58.044 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 18:25:58.048 +02:00 [INF] Hosting environment: Development
2025-12-24 18:25:58.051 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 18:25:58.746 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 18:25:59.198 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 464.1027ms
2025-12-24 18:25:59.256 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 18:25:59.256 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 18:25:59.279 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 23.203ms
2025-12-24 18:25:59.336 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 80.9684ms
2025-12-24 18:25:59.381 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 18:25:59.632 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 251.9597ms
2025-12-24 18:26:09.028 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7260/api/Categories?name=vvvv - null 0
2025-12-24 18:26:09.055 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.CategoriesController.PostCategory (TrickyTrayAPI)'
2025-12-24 18:26:09.140 +02:00 [INF] Route matched with {action = "PostCategory", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.Models.Category]] PostCategory(System.String) on controller TrickyTrayAPI.Controllers.CategoriesController (TrickyTrayAPI).
2025-12-24 18:26:09.161 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.CategoriesController.PostCategory (TrickyTrayAPI) in 9.1735ms
2025-12-24 18:26:09.183 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.CategoriesController.PostCategory (TrickyTrayAPI)'
2025-12-24 18:26:09.192 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'TrickyTrayAPI.Services.ICategoryService' while attempting to activate 'TrickyTrayAPI.Controllers.CategoriesController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-12-24 18:26:09.260 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7260/api/Categories?name=vvvv - 500 null text/plain; charset=utf-8 232.0945ms
2025-12-24 18:27:03.792 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 18:27:03.832 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 18:27:03.837 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 18:27:03.839 +02:00 [INF] Hosting environment: Development
2025-12-24 18:27:03.840 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 18:27:04.099 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 18:27:04.466 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 376.6853ms
2025-12-24 18:27:04.519 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 18:27:04.519 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 18:27:04.533 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 14.2011ms
2025-12-24 18:27:04.572 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 53.0529ms
2025-12-24 18:27:04.611 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 18:27:04.745 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 135.1097ms
2025-12-24 18:27:08.465 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Categories - null null
2025-12-24 18:27:08.497 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.CategoriesController.GetCategories (TrickyTrayAPI)'
2025-12-24 18:27:08.550 +02:00 [INF] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TrickyTrayAPI.Models.Category]]] GetCategories() on controller TrickyTrayAPI.Controllers.CategoriesController (TrickyTrayAPI).
2025-12-24 18:27:08.571 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.CategoriesController.GetCategories (TrickyTrayAPI) in 9.2546ms
2025-12-24 18:27:08.580 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.CategoriesController.GetCategories (TrickyTrayAPI)'
2025-12-24 18:27:08.588 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'TrickyTrayAPI.Services.ICategoryService' while attempting to activate 'TrickyTrayAPI.Controllers.CategoriesController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-12-24 18:27:08.654 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Categories - 500 null text/plain; charset=utf-8 189.9726ms
2025-12-24 18:29:25.959 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 18:29:25.995 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 18:29:25.999 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 18:29:26.004 +02:00 [INF] Hosting environment: Development
2025-12-24 18:29:26.006 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 18:29:26.377 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 18:29:26.737 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 367.284ms
2025-12-24 18:29:26.790 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 18:29:26.790 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 18:29:26.826 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 37.6416ms
2025-12-24 18:29:26.850 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 61.0395ms
2025-12-24 18:29:26.894 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 18:29:27.020 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 126.7849ms
2025-12-24 18:29:32.078 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Categories - null null
2025-12-24 18:29:32.110 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.CategoriesController.GetCategories (TrickyTrayAPI)'
2025-12-24 18:29:32.161 +02:00 [INF] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TrickyTrayAPI.Models.Category]]] GetCategories() on controller TrickyTrayAPI.Controllers.CategoriesController (TrickyTrayAPI).
2025-12-24 18:29:32.679 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.CategoriesController.GetCategories (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 18:29:35.293 +02:00 [INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name]
FROM [Categories] AS [c]
2025-12-24 18:29:35.457 +02:00 [INF] Successfully retrieved all categories
2025-12-24 18:29:35.472 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.CategoriesController.GetCategories (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2780.8749ms.
2025-12-24 18:29:35.497 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[TrickyTrayAPI.Models.Category, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-24 18:29:35.564 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.CategoriesController.GetCategories (TrickyTrayAPI) in 3377.1315ms
2025-12-24 18:29:35.574 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.CategoriesController.GetCategories (TrickyTrayAPI)'
2025-12-24 18:29:35.588 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Categories - 200 null application/json; charset=utf-8 3509.2367ms
2025-12-24 18:29:41.295 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7260/api/Categories - null 0
2025-12-24 18:29:41.302 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.CategoriesController.PostCategory (TrickyTrayAPI)'
2025-12-24 18:29:41.329 +02:00 [INF] Route matched with {action = "PostCategory", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.Models.Category]] PostCategory(System.String) on controller TrickyTrayAPI.Controllers.CategoriesController (TrickyTrayAPI).
2025-12-24 18:29:41.391 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-12-24 18:29:41.433 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.CategoriesController.PostCategory (TrickyTrayAPI) in 96.0084ms
2025-12-24 18:29:41.435 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.CategoriesController.PostCategory (TrickyTrayAPI)'
2025-12-24 18:29:41.438 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7260/api/Categories - 400 null application/problem+json; charset=utf-8 143.1937ms
2025-12-24 18:29:44.552 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7260/api/Categories?name=sasa - null 0
2025-12-24 18:29:44.561 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.CategoriesController.PostCategory (TrickyTrayAPI)'
2025-12-24 18:29:44.568 +02:00 [INF] Route matched with {action = "PostCategory", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TrickyTrayAPI.Models.Category]] PostCategory(System.String) on controller TrickyTrayAPI.Controllers.CategoriesController (TrickyTrayAPI).
2025-12-24 18:29:44.684 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.CategoriesController.PostCategory (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 18:29:44.992 +02:00 [INF] Executed DbCommand (65ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Categories] ([Name])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2025-12-24 18:29:45.049 +02:00 [INF] Successfully added category with id 4
2025-12-24 18:29:45.055 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.CategoriesController.PostCategory (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.CreatedAtActionResult in 367.8904ms.
2025-12-24 18:29:45.063 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'TrickyTrayAPI.Models.Category'.
2025-12-24 18:29:45.107 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.CategoriesController.PostCategory (TrickyTrayAPI) in 534.8548ms
2025-12-24 18:29:45.110 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.CategoriesController.PostCategory (TrickyTrayAPI)'
2025-12-24 18:29:45.113 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7260/api/Categories?name=sasa - 201 null application/json; charset=utf-8 560.6749ms
2025-12-24 18:38:30.130 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 18:38:30.177 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 18:38:30.180 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 18:38:30.183 +02:00 [INF] Hosting environment: Development
2025-12-24 18:38:30.184 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 18:38:30.843 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 18:38:31.168 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 338.0801ms
2025-12-24 18:38:31.345 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 18:38:31.349 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 18:38:31.367 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 22.1199ms
2025-12-24 18:38:31.428 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 79.8526ms
2025-12-24 18:38:31.478 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 18:38:31.743 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 265.5855ms
2025-12-24 18:39:01.187 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Gift/search?giftName=aaaaaaa - null null
2025-12-24 18:39:01.232 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.Search (TrickyTrayAPI)'
2025-12-24 18:39:01.291 +02:00 [INF] Route matched with {action = "Search", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TrickyTrayAPI.DTOs.GetGiftDTO]]] Search(System.String, System.String, System.Nullable`1[System.Int32]) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 18:39:01.761 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.GiftController.Search (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 18:39:04.804 +02:00 [INF] Executed DbCommand (127ms) [Parameters=[@__giftName_0_contains='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[Name], [g].[WinnerId], [d].[Id], [d].[Email], [d].[Name], [d].[PhoneNumber], [u].[Id], [u].[Email], [u].[FirstName], [u].[GiftId], [u].[LastName], [u].[PhoneNumber], [u].[TypeCostumer]
FROM [Gifts] AS [g]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Users] AS [u] ON [g].[Id] = [u].[GiftId]
WHERE [g].[Name] LIKE @__giftName_0_contains ESCAPE N'\'
ORDER BY [g].[Id], [d].[Id]
2025-12-24 18:39:04.863 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.GiftController.Search (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3092.22ms.
2025-12-24 18:39:04.895 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[TrickyTrayAPI.Models.Gift, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[TrickyTrayAPI.DTOs.GetGiftDTO, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-24 18:39:04.967 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.Search (TrickyTrayAPI) in 3661.4389ms
2025-12-24 18:39:04.972 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.Search (TrickyTrayAPI)'
2025-12-24 18:39:04.986 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Gift/search?giftName=aaaaaaa - 200 null application/json; charset=utf-8 3799.5818ms
2025-12-24 18:39:42.469 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Gift/search?donorName=a - null null
2025-12-24 18:39:42.496 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.Search (TrickyTrayAPI)'
2025-12-24 18:39:42.499 +02:00 [INF] Route matched with {action = "Search", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TrickyTrayAPI.DTOs.GetGiftDTO]]] Search(System.String, System.String, System.Nullable`1[System.Int32]) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 18:39:42.539 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.GiftController.Search (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 18:39:42.641 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__donorName_0_contains='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[Name], [g].[WinnerId], [d].[Id], [d].[Email], [d].[Name], [d].[PhoneNumber], [u].[Id], [u].[Email], [u].[FirstName], [u].[GiftId], [u].[LastName], [u].[PhoneNumber], [u].[TypeCostumer]
FROM [Gifts] AS [g]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Users] AS [u] ON [g].[Id] = [u].[GiftId]
WHERE [d].[Name] LIKE @__donorName_0_contains ESCAPE N'\'
ORDER BY [g].[Id], [d].[Id]
2025-12-24 18:39:42.905 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.GiftController.Search (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 363.3391ms.
2025-12-24 18:39:42.911 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[TrickyTrayAPI.Models.Gift, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[TrickyTrayAPI.DTOs.GetGiftDTO, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-24 18:40:41.074 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 18:40:41.114 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 18:40:41.118 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 18:40:41.120 +02:00 [INF] Hosting environment: Development
2025-12-24 18:40:41.122 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 18:40:41.813 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 18:40:42.118 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 312.617ms
2025-12-24 18:40:42.176 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 18:40:42.176 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 18:40:42.204 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 28.3313ms
2025-12-24 18:40:42.253 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 77.0994ms
2025-12-24 18:40:42.311 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 18:40:42.580 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 269.5623ms
2025-12-24 18:40:52.031 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Gift/search?donorName=a - null null
2025-12-24 18:40:52.056 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.Search (TrickyTrayAPI)'
2025-12-24 18:40:52.132 +02:00 [INF] Route matched with {action = "Search", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TrickyTrayAPI.DTOs.GetGiftDTO]]] Search(System.String, System.String, System.Nullable`1[System.Int32]) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 18:40:52.552 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.GiftController.Search (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 18:40:55.481 +02:00 [INF] Executed DbCommand (115ms) [Parameters=[@__donorName_0_contains='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[Name], [g].[WinnerId], [d].[Id], [d].[Email], [d].[Name], [d].[PhoneNumber], [c].[Id], [u].[Id], [u].[Email], [u].[FirstName], [u].[GiftId], [u].[LastName], [u].[PhoneNumber], [u].[TypeCostumer], [c].[Name]
FROM [Gifts] AS [g]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
LEFT JOIN [Users] AS [u] ON [g].[Id] = [u].[GiftId]
WHERE [d].[Name] LIKE @__donorName_0_contains ESCAPE N'\'
ORDER BY [g].[Id], [d].[Id], [c].[Id]
2025-12-24 18:40:55.771 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.GiftController.Search (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3205.7301ms.
2025-12-24 18:40:55.795 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[TrickyTrayAPI.Models.Gift, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[TrickyTrayAPI.DTOs.GetGiftDTO, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-24 18:40:55.858 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.Search (TrickyTrayAPI) in 3710.3154ms
2025-12-24 18:40:55.870 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.Search (TrickyTrayAPI)'
2025-12-24 18:40:55.895 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Gift/search?donorName=a - 200 null application/json; charset=utf-8 3864.0454ms
2025-12-24 18:49:00.754 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 18:49:00.785 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 18:49:00.788 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 18:49:00.790 +02:00 [INF] Hosting environment: Development
2025-12-24 18:49:00.791 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 18:49:01.079 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 18:49:01.417 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 347.5821ms
2025-12-24 18:49:01.468 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 18:49:01.468 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 18:49:01.500 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 32.6535ms
2025-12-24 18:49:01.536 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 68.9898ms
2025-12-24 18:49:01.572 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 18:49:01.692 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 120.6297ms
2025-12-24 18:49:06.402 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Gift - null null
2025-12-24 18:49:06.445 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.GetAll (TrickyTrayAPI)'
2025-12-24 18:49:06.579 +02:00 [INF] Route matched with {action = "GetAll", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TrickyTrayAPI.DTOs.GetGiftDTO]]] GetAll() on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 18:49:07.114 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.GiftController.GetAll (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 18:49:10.219 +02:00 [ERR] Failed executing DbCommand (115ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[ImgUrl], [g].[Name], [g].[WinnerId], [c].[Id], [c].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[PhoneNumber], [u].[Id], [u].[Email], [u].[FirstName], [u].[GiftId], [u].[LastName], [u].[PhoneNumber], [u].[TypeCostumer]
FROM [Gifts] AS [g]
INNER JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Users] AS [u] ON [g].[WinnerId] = [u].[Id]
2025-12-24 18:49:10.309 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'WebApi.Data.AppDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'ImgUrl'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:71a08e75-2fe8-461a-af0f-d4c6f237df75
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'ImgUrl'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:71a08e75-2fe8-461a-af0f-d4c6f237df75
Error Number:207,State:1,Class:16
2025-12-24 18:49:10.547 +02:00 [ERR] Invalid column name 'ImgUrl'.
2025-12-24 18:49:10.743 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.GetAll (TrickyTrayAPI) in 4148.8013ms
2025-12-24 18:49:10.752 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.GetAll (TrickyTrayAPI)'
2025-12-24 18:49:10.766 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'ImgUrl'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at TrickyTrayAPI.Repositories.GiftRepository.GetAllAsync() in C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI\Repositories\GiftRepository.cs:line 20
   at TrickyTrayAPI.Services.GiftService.GetAllAsync() in C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI\Services\GiftService.cs:line 28
   at TrickyTrayAPI.Controllers.GiftController.GetAll() in C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI\Controllers\GiftController.cs:line 25
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
ClientConnectionId:71a08e75-2fe8-461a-af0f-d4c6f237df75
Error Number:207,State:1,Class:16
2025-12-24 18:49:10.837 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Gift - 500 null text/plain; charset=utf-8 4436.9956ms
2025-12-24 18:51:36.108 +02:00 [INF] Executed DbCommand (228ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [DemoToTest];
2025-12-24 18:51:36.198 +02:00 [INF] Executed DbCommand (63ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [DemoToTest] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-12-24 18:51:36.211 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-24 18:51:36.215 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-12-24 18:51:36.237 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-12-24 18:51:36.273 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-12-24 18:51:36.280 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-24 18:51:36.282 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-24 18:51:36.291 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-12-24 18:51:36.300 +02:00 [INF] Applying migration '20251221113435_InitialCreate'.
2025-12-24 18:51:36.322 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Categories] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Categories] PRIMARY KEY ([Id])
);
2025-12-24 18:51:36.326 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Donors] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NULL,
    [Email] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Donors] PRIMARY KEY ([Id])
);
2025-12-24 18:51:36.331 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CartItems] (
    [Id] int NOT NULL IDENTITY,
    [Quantity] int NOT NULL,
    [GiftId] int NOT NULL,
    [CartId] int NOT NULL,
    CONSTRAINT [PK_CartItems] PRIMARY KEY ([Id])
);
2025-12-24 18:51:36.336 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Carts] (
    [Id] int NOT NULL IDENTITY,
    [CostumerId] int NOT NULL,
    CONSTRAINT [PK_Carts] PRIMARY KEY ([Id])
);
2025-12-24 18:51:36.340 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Costumers] (
    [Id] int NOT NULL IDENTITY,
    [LastName] nvarchar(max) NOT NULL,
    [FirstName] nvarchar(max) NOT NULL,
    [Email] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NOT NULL,
    [TypeCostumer] int NOT NULL,
    [GiftId] int NULL,
    CONSTRAINT [PK_Costumers] PRIMARY KEY ([Id])
);
2025-12-24 18:51:36.346 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Gifts] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [TypeGift] int NOT NULL,
    [DonorId] int NOT NULL,
    [CategoryId] int NOT NULL,
    [WinnerId] int NOT NULL,
    CONSTRAINT [PK_Gifts] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Gifts_Categories_CategoryId] FOREIGN KEY ([CategoryId]) REFERENCES [Categories] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Gifts_Costumers_WinnerId] FOREIGN KEY ([WinnerId]) REFERENCES [Costumers] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Gifts_Donors_DonorId] FOREIGN KEY ([DonorId]) REFERENCES [Donors] ([Id]) ON DELETE CASCADE
);
2025-12-24 18:51:36.351 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Purchases] (
    [Id] int NOT NULL IDENTITY,
    [CostumerId] int NOT NULL,
    [Price] int NOT NULL,
    [Date] datetime2 NOT NULL,
    CONSTRAINT [PK_Purchases] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Purchases_Costumers_CostumerId] FOREIGN KEY ([CostumerId]) REFERENCES [Costumers] ([Id]) ON DELETE CASCADE
);
2025-12-24 18:51:36.356 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PurchaseItems] (
    [Id] int NOT NULL IDENTITY,
    [GiftId] int NOT NULL,
    [IsWinner] bit NOT NULL,
    [CostumerId] int NOT NULL,
    [PurchaseId] int NULL,
    CONSTRAINT [PK_PurchaseItems] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PurchaseItems_Costumers_CostumerId] FOREIGN KEY ([CostumerId]) REFERENCES [Costumers] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_PurchaseItems_Gifts_GiftId] FOREIGN KEY ([GiftId]) REFERENCES [Gifts] ([Id]),
    CONSTRAINT [FK_PurchaseItems_Purchases_PurchaseId] FOREIGN KEY ([PurchaseId]) REFERENCES [Purchases] ([Id])
);
2025-12-24 18:51:36.360 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_CartItems_CartId] ON [CartItems] ([CartId]);
2025-12-24 18:51:36.363 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_CartItems_GiftId] ON [CartItems] ([GiftId]);
2025-12-24 18:51:36.366 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Carts_CostumerId] ON [Carts] ([CostumerId]);
2025-12-24 18:51:36.370 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Costumers_GiftId] ON [Costumers] ([GiftId]);
2025-12-24 18:51:36.372 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Gifts_CategoryId] ON [Gifts] ([CategoryId]);
2025-12-24 18:51:36.375 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Gifts_DonorId] ON [Gifts] ([DonorId]);
2025-12-24 18:51:36.379 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Gifts_WinnerId] ON [Gifts] ([WinnerId]);
2025-12-24 18:51:36.383 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PurchaseItems_CostumerId] ON [PurchaseItems] ([CostumerId]);
2025-12-24 18:51:36.386 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PurchaseItems_GiftId] ON [PurchaseItems] ([GiftId]);
2025-12-24 18:51:36.389 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PurchaseItems_PurchaseId] ON [PurchaseItems] ([PurchaseId]);
2025-12-24 18:51:36.392 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Purchases_CostumerId] ON [Purchases] ([CostumerId]);
2025-12-24 18:51:36.396 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [CartItems] ADD CONSTRAINT [FK_CartItems_Carts_CartId] FOREIGN KEY ([CartId]) REFERENCES [Carts] ([Id]) ON DELETE CASCADE;
2025-12-24 18:51:36.401 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [CartItems] ADD CONSTRAINT [FK_CartItems_Gifts_GiftId] FOREIGN KEY ([GiftId]) REFERENCES [Gifts] ([Id]);
2025-12-24 18:51:36.404 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Carts] ADD CONSTRAINT [FK_Carts_Costumers_CostumerId] FOREIGN KEY ([CostumerId]) REFERENCES [Costumers] ([Id]) ON DELETE CASCADE;
2025-12-24 18:51:36.408 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Costumers] ADD CONSTRAINT [FK_Costumers_Gifts_GiftId] FOREIGN KEY ([GiftId]) REFERENCES [Gifts] ([Id]);
2025-12-24 18:51:36.413 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251221113435_InitialCreate', N'9.0.11');
2025-12-24 18:51:36.415 +02:00 [INF] Applying migration '20251223155253_InitialCreated'.
2025-12-24 18:51:36.432 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Carts] DROP CONSTRAINT [FK_Carts_Costumers_CostumerId];
2025-12-24 18:51:36.436 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Gifts] DROP CONSTRAINT [FK_Gifts_Costumers_WinnerId];
2025-12-24 18:51:36.439 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [PurchaseItems] DROP CONSTRAINT [FK_PurchaseItems_Costumers_CostumerId];
2025-12-24 18:51:36.442 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Purchases] DROP CONSTRAINT [FK_Purchases_Costumers_CostumerId];
2025-12-24 18:51:36.447 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE [Costumers];
2025-12-24 18:51:36.907 +02:00 [INF] Executed DbCommand (458ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Purchases].[CostumerId]', N'UserId', 'COLUMN';
2025-12-24 18:51:36.913 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Purchases].[IX_Purchases_CostumerId]', N'IX_Purchases_UserId', 'INDEX';
2025-12-24 18:51:36.916 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[PurchaseItems].[CostumerId]', N'UserId', 'COLUMN';
2025-12-24 18:51:36.919 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[PurchaseItems].[IX_PurchaseItems_CostumerId]', N'IX_PurchaseItems_UserId', 'INDEX';
2025-12-24 18:51:36.922 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Carts].[CostumerId]', N'UserId', 'COLUMN';
2025-12-24 18:51:36.925 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Carts].[IX_Carts_CostumerId]', N'IX_Carts_UserId', 'INDEX';
2025-12-24 18:51:36.964 +02:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var sysname;
SELECT @var = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Donors]') AND [c].[name] = N'Name');
IF @var IS NOT NULL EXEC(N'ALTER TABLE [Donors] DROP CONSTRAINT [' + @var + '];');
ALTER TABLE [Donors] ALTER COLUMN [Name] nvarchar(100) NULL;
2025-12-24 18:51:37.001 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Donors]') AND [c].[name] = N'Email');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Donors] DROP CONSTRAINT [' + @var1 + '];');
UPDATE [Donors] SET [Email] = N'' WHERE [Email] IS NULL;
ALTER TABLE [Donors] ALTER COLUMN [Email] nvarchar(max) NOT NULL;
ALTER TABLE [Donors] ADD DEFAULT N'' FOR [Email];
2025-12-24 18:51:37.009 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [LastName] nvarchar(max) NOT NULL,
    [FirstName] nvarchar(max) NOT NULL,
    [Email] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NOT NULL,
    [TypeCostumer] int NOT NULL,
    [GiftId] int NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Users_Gifts_GiftId] FOREIGN KEY ([GiftId]) REFERENCES [Gifts] ([Id])
);
2025-12-24 18:51:37.012 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Users_GiftId] ON [Users] ([GiftId]);
2025-12-24 18:51:37.016 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Carts] ADD CONSTRAINT [FK_Carts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2025-12-24 18:51:37.020 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Gifts] ADD CONSTRAINT [FK_Gifts_Users_WinnerId] FOREIGN KEY ([WinnerId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2025-12-24 18:51:37.023 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [PurchaseItems] ADD CONSTRAINT [FK_PurchaseItems_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2025-12-24 18:51:37.027 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Purchases] ADD CONSTRAINT [FK_Purchases_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2025-12-24 18:51:37.030 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251223155253_InitialCreated', N'9.0.11');
2025-12-24 18:51:37.031 +02:00 [INF] Applying migration '20251223184055_InitialCreate5'.
2025-12-24 18:51:37.047 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Gifts] DROP CONSTRAINT [FK_Gifts_Users_WinnerId];
2025-12-24 18:51:37.077 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var2 sysname;
SELECT @var2 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Gifts]') AND [c].[name] = N'TypeGift');
IF @var2 IS NOT NULL EXEC(N'ALTER TABLE [Gifts] DROP CONSTRAINT [' + @var2 + '];');
ALTER TABLE [Gifts] DROP COLUMN [TypeGift];
2025-12-24 18:51:37.110 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var3 sysname;
SELECT @var3 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Gifts]') AND [c].[name] = N'WinnerId');
IF @var3 IS NOT NULL EXEC(N'ALTER TABLE [Gifts] DROP CONSTRAINT [' + @var3 + '];');
ALTER TABLE [Gifts] ALTER COLUMN [WinnerId] int NULL;
2025-12-24 18:51:37.143 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var4 sysname;
SELECT @var4 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Gifts]') AND [c].[name] = N'Name');
IF @var4 IS NOT NULL EXEC(N'ALTER TABLE [Gifts] DROP CONSTRAINT [' + @var4 + '];');
ALTER TABLE [Gifts] ALTER COLUMN [Name] nvarchar(100) NOT NULL;
2025-12-24 18:51:37.175 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var5 sysname;
SELECT @var5 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Gifts]') AND [c].[name] = N'Description');
IF @var5 IS NOT NULL EXEC(N'ALTER TABLE [Gifts] DROP CONSTRAINT [' + @var5 + '];');
ALTER TABLE [Gifts] ALTER COLUMN [Description] nvarchar(200) NOT NULL;
2025-12-24 18:51:37.179 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Gifts] ADD CONSTRAINT [FK_Gifts_Users_WinnerId] FOREIGN KEY ([WinnerId]) REFERENCES [Users] ([Id]);
2025-12-24 18:51:37.184 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251223184055_InitialCreate5', N'9.0.11');
2025-12-24 18:51:37.185 +02:00 [INF] Applying migration '20251224145401_initialCreate4'.
2025-12-24 18:51:37.197 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251224145401_initialCreate4', N'9.0.11');
2025-12-24 18:51:37.200 +02:00 [INF] Applying migration '20251224145417_init1'.
2025-12-24 18:51:37.208 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251224145417_init1', N'9.0.11');
2025-12-24 18:51:37.210 +02:00 [INF] Applying migration '20251224160559_init2'.
2025-12-24 18:51:37.223 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [CartItems] DROP CONSTRAINT [FK_CartItems_Carts_CartId];
2025-12-24 18:51:37.228 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE [Carts];
2025-12-24 18:51:37.234 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[CartItems].[CartId]', N'UserId', 'COLUMN';
2025-12-24 18:51:37.238 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[CartItems].[IX_CartItems_CartId]', N'IX_CartItems_UserId', 'INDEX';
2025-12-24 18:51:37.242 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [CartItems] ADD CONSTRAINT [FK_CartItems_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2025-12-24 18:51:37.245 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251224160559_init2', N'9.0.11');
2025-12-24 18:51:37.248 +02:00 [INF] Applying migration '20251224165129_initialCreate6'.
2025-12-24 18:51:37.285 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Gifts] ADD [ImgUrl] nvarchar(200) NOT NULL DEFAULT N'';
2025-12-24 18:51:37.288 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251224165129_initialCreate6', N'9.0.11');
2025-12-24 18:51:37.296 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-12-24 18:53:04.441 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 18:53:04.493 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 18:53:04.498 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 18:53:04.499 +02:00 [INF] Hosting environment: Development
2025-12-24 18:53:04.501 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 18:53:05.060 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 18:53:05.392 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 346.8375ms
2025-12-24 18:53:05.453 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 18:53:05.453 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 18:53:05.467 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 14.5113ms
2025-12-24 18:53:05.514 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 61.5392ms
2025-12-24 18:53:05.571 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 18:53:05.829 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 258.5147ms
2025-12-24 18:53:10.730 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Gift - null null
2025-12-24 18:53:10.785 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.GetAll (TrickyTrayAPI)'
2025-12-24 18:53:10.838 +02:00 [INF] Route matched with {action = "GetAll", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TrickyTrayAPI.DTOs.GetGiftDTO]]] GetAll() on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 18:53:11.237 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.GiftController.GetAll (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 18:53:14.041 +02:00 [INF] Executed DbCommand (94ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[ImgUrl], [g].[Name], [g].[WinnerId], [c].[Id], [c].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[PhoneNumber], [u].[Id], [u].[Email], [u].[FirstName], [u].[GiftId], [u].[LastName], [u].[PhoneNumber], [u].[TypeCostumer]
FROM [Gifts] AS [g]
INNER JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Users] AS [u] ON [g].[WinnerId] = [u].[Id]
2025-12-24 18:53:14.285 +02:00 [INF] get gifts
2025-12-24 18:53:14.301 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.GiftController.GetAll (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3052.4532ms.
2025-12-24 18:53:14.333 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[TrickyTrayAPI.Models.Gift, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[TrickyTrayAPI.DTOs.GetGiftDTO, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-24 18:53:14.410 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.GetAll (TrickyTrayAPI) in 3560.8682ms
2025-12-24 18:53:14.416 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.GetAll (TrickyTrayAPI)'
2025-12-24 18:53:14.435 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Gift - 200 null application/json; charset=utf-8 3704.5321ms
2025-12-24 19:08:41.985 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 19:08:42.034 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 19:08:42.039 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 19:08:42.041 +02:00 [INF] Hosting environment: Development
2025-12-24 19:08:42.045 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 19:08:42.713 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 19:08:43.174 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 468.5339ms
2025-12-24 19:08:43.233 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 19:08:43.233 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 19:08:43.258 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 25.2715ms
2025-12-24 19:08:43.307 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 73.9439ms
2025-12-24 19:08:43.360 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 19:08:43.665 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 305.4448ms
2025-12-24 19:08:53.922 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Gift/sorted?sortByName=true&sortByCategory=false - null null
2025-12-24 19:08:53.969 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.GetSorted (TrickyTrayAPI)'
2025-12-24 19:08:54.022 +02:00 [INF] Route matched with {action = "GetSorted", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TrickyTrayAPI.DTOs.GetGiftDTO]]] GetSorted(Boolean, Boolean) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 19:08:54.447 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.GiftController.GetSorted (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 19:08:57.144 +02:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[ImgUrl], [g].[Name], [g].[WinnerId]
FROM [Gifts] AS [g]
ORDER BY [g].[Name]
2025-12-24 19:08:57.355 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.GiftController.GetSorted (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2897.151ms.
2025-12-24 19:08:57.378 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[TrickyTrayAPI.Models.Gift, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[TrickyTrayAPI.DTOs.GetGiftDTO, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-24 19:09:45.793 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 19:09:45.839 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 19:09:45.846 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 19:09:45.848 +02:00 [INF] Hosting environment: Development
2025-12-24 19:09:45.850 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 19:09:46.219 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 19:09:46.572 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 358.7943ms
2025-12-24 19:09:46.624 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 19:09:46.624 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 19:09:46.654 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 31.1998ms
2025-12-24 19:09:46.699 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 75.8845ms
2025-12-24 19:09:46.741 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 19:09:46.996 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 255.4703ms
2025-12-24 19:09:55.981 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Gift/sorted?sortByName=true&sortByCategory=false - null null
2025-12-24 19:09:56.011 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.GetSorted (TrickyTrayAPI)'
2025-12-24 19:09:56.096 +02:00 [INF] Route matched with {action = "GetSorted", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TrickyTrayAPI.DTOs.GetGiftDTO]]] GetSorted(Boolean, Boolean) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 19:09:56.548 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.GiftController.GetSorted (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 19:09:59.544 +02:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[ImgUrl], [g].[Name], [g].[WinnerId], [d].[Id], [d].[Email], [d].[Name], [d].[PhoneNumber], [c].[Id], [u].[Id], [u].[Email], [u].[FirstName], [u].[GiftId], [u].[LastName], [u].[PhoneNumber], [u].[TypeCostumer], [c].[Name]
FROM [Gifts] AS [g]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
LEFT JOIN [Users] AS [u] ON [g].[Id] = [u].[GiftId]
ORDER BY [g].[Name], [g].[Id], [d].[Id], [c].[Id]
2025-12-24 19:09:59.809 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.GiftController.GetSorted (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3250.567ms.
2025-12-24 19:09:59.831 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[TrickyTrayAPI.Models.Gift, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[TrickyTrayAPI.DTOs.GetGiftDTO, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-24 19:09:59.892 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.GetSorted (TrickyTrayAPI) in 3785.2038ms
2025-12-24 19:09:59.895 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.GetSorted (TrickyTrayAPI)'
2025-12-24 19:09:59.909 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Gift/sorted?sortByName=true&sortByCategory=false - 200 null application/json; charset=utf-8 3928.1241ms
2025-12-24 19:10:09.640 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Gift/sorted?sortByName=false&sortByCategory=true - null null
2025-12-24 19:10:09.663 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.GetSorted (TrickyTrayAPI)'
2025-12-24 19:10:09.668 +02:00 [INF] Route matched with {action = "GetSorted", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TrickyTrayAPI.DTOs.GetGiftDTO]]] GetSorted(Boolean, Boolean) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 19:10:09.715 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.GiftController.GetSorted (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 19:10:09.891 +02:00 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[ImgUrl], [g].[Name], [g].[WinnerId], [d].[Id], [d].[Email], [d].[Name], [d].[PhoneNumber], [c].[Id], [u].[Id], [u].[Email], [u].[FirstName], [u].[GiftId], [u].[LastName], [u].[PhoneNumber], [u].[TypeCostumer], [c].[Name]
FROM [Gifts] AS [g]
INNER JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Users] AS [u] ON [g].[Id] = [u].[GiftId]
ORDER BY [c].[Name], [g].[Id], [c].[Id], [d].[Id]
2025-12-24 19:10:09.904 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.GiftController.GetSorted (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 186.5648ms.
2025-12-24 19:10:09.910 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[TrickyTrayAPI.Models.Gift, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[TrickyTrayAPI.DTOs.GetGiftDTO, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-24 19:10:09.914 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.GetSorted (TrickyTrayAPI) in 242.3698ms
2025-12-24 19:10:09.920 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.GetSorted (TrickyTrayAPI)'
2025-12-24 19:10:09.924 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Gift/sorted?sortByName=false&sortByCategory=true - 200 null application/json; charset=utf-8 284.3267ms
2025-12-24 19:10:49.930 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 19:10:49.978 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 19:10:49.984 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 19:10:49.986 +02:00 [INF] Hosting environment: Development
2025-12-24 19:10:49.989 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 19:10:50.486 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 19:10:50.812 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 333.4439ms
2025-12-24 19:10:50.818 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 19:10:50.840 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 19:10:50.847 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 29.4621ms
2025-12-24 19:10:50.915 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 74.5521ms
2025-12-24 19:10:50.964 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 19:10:51.098 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 135.0979ms
2025-12-24 19:11:00.797 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Gift/sorted?sortByName=false&sortByCategory=true - null null
2025-12-24 19:11:00.837 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.GetSorted (TrickyTrayAPI)'
2025-12-24 19:11:00.899 +02:00 [INF] Route matched with {action = "GetSorted", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TrickyTrayAPI.DTOs.GetGiftDTO]]] GetSorted(Boolean, Boolean) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 19:11:01.310 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.GiftController.GetSorted (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 19:11:04.196 +02:00 [INF] Executed DbCommand (88ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[ImgUrl], [g].[Name], [g].[WinnerId], [d].[Id], [d].[Email], [d].[Name], [d].[PhoneNumber], [c].[Id], [u].[Id], [u].[Email], [u].[FirstName], [u].[GiftId], [u].[LastName], [u].[PhoneNumber], [u].[TypeCostumer], [c].[Name]
FROM [Gifts] AS [g]
INNER JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Users] AS [u] ON [g].[Id] = [u].[GiftId]
ORDER BY [c].[Name], [g].[Id], [c].[Id], [d].[Id]
2025-12-24 19:11:04.470 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.GiftController.GetSorted (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3150.7815ms.
2025-12-24 19:11:04.491 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[TrickyTrayAPI.Models.Gift, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[TrickyTrayAPI.DTOs.GetGiftDTO, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-24 19:11:04.552 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.GetSorted (TrickyTrayAPI) in 3640.9605ms
2025-12-24 19:11:04.562 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.GetSorted (TrickyTrayAPI)'
2025-12-24 19:11:04.575 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Gift/sorted?sortByName=false&sortByCategory=true - 200 null application/json; charset=utf-8 3778.7234ms
2025-12-24 19:15:10.488 +02:00 [INF] Now listening on: https://localhost:7260
2025-12-24 19:15:10.527 +02:00 [INF] Now listening on: http://localhost:5273
2025-12-24 19:15:10.530 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-24 19:15:10.531 +02:00 [INF] Hosting environment: Development
2025-12-24 19:15:10.533 +02:00 [INF] Content root path: C:\Users\user1\Documents\פרויקט angular-api\TrickyTrayAPI\TrickyTrayAPI
2025-12-24 19:15:10.915 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/index.html - null null
2025-12-24 19:15:11.315 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/index.html - 200 null text/html;charset=utf-8 410.5929ms
2025-12-24 19:15:11.326 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - null null
2025-12-24 19:15:11.338 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 12.3715ms
2025-12-24 19:15:11.344 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/_vs/browserLink - null null
2025-12-24 19:15:11.412 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/_vs/browserLink - 200 null text/javascript; charset=UTF-8 68.195ms
2025-12-24 19:15:11.473 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - null null
2025-12-24 19:15:11.696 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 223.8037ms
2025-12-24 19:15:22.076 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Gift/by-category/2 - null null
2025-12-24 19:15:22.110 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.GetByCategory (TrickyTrayAPI)'
2025-12-24 19:15:22.173 +02:00 [INF] Route matched with {action = "GetByCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TrickyTrayAPI.DTOs.GetGiftDTO]]] GetByCategory(Int32) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 19:15:22.604 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.GiftController.GetByCategory (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 19:15:25.480 +02:00 [INF] Executed DbCommand (105ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[ImgUrl], [g].[Name], [g].[WinnerId], [c].[Id], [c].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[PhoneNumber], [u].[Id], [u].[Email], [u].[FirstName], [u].[GiftId], [u].[LastName], [u].[PhoneNumber], [u].[TypeCostumer]
FROM [Gifts] AS [g]
INNER JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Users] AS [u] ON [g].[WinnerId] = [u].[Id]
WHERE [g].[CategoryId] = @__categoryId_0
2025-12-24 19:15:25.769 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.GiftController.GetByCategory (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3148.9607ms.
2025-12-24 19:15:25.797 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[TrickyTrayAPI.Models.Gift, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[TrickyTrayAPI.DTOs.GetGiftDTO, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-24 19:15:25.855 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.GetByCategory (TrickyTrayAPI) in 3670.0057ms
2025-12-24 19:15:25.860 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.GetByCategory (TrickyTrayAPI)'
2025-12-24 19:15:25.875 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Gift/by-category/2 - 200 null application/json; charset=utf-8 3799.8634ms
2025-12-24 19:15:31.703 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Gift/by-category/1 - null null
2025-12-24 19:15:31.720 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.GetByCategory (TrickyTrayAPI)'
2025-12-24 19:15:31.725 +02:00 [INF] Route matched with {action = "GetByCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TrickyTrayAPI.DTOs.GetGiftDTO]]] GetByCategory(Int32) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 19:15:31.770 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.GiftController.GetByCategory (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 19:15:31.822 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[ImgUrl], [g].[Name], [g].[WinnerId], [c].[Id], [c].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[PhoneNumber], [u].[Id], [u].[Email], [u].[FirstName], [u].[GiftId], [u].[LastName], [u].[PhoneNumber], [u].[TypeCostumer]
FROM [Gifts] AS [g]
INNER JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Users] AS [u] ON [g].[WinnerId] = [u].[Id]
WHERE [g].[CategoryId] = @__categoryId_0
2025-12-24 19:15:31.829 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.GiftController.GetByCategory (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 56.6205ms.
2025-12-24 19:15:31.833 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[TrickyTrayAPI.Models.Gift, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[TrickyTrayAPI.DTOs.GetGiftDTO, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-24 19:15:31.837 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.GetByCategory (TrickyTrayAPI) in 106.5964ms
2025-12-24 19:15:31.841 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.GetByCategory (TrickyTrayAPI)'
2025-12-24 19:15:31.843 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Gift/by-category/1 - 200 null application/json; charset=utf-8 140.5757ms
2025-12-24 19:15:37.000 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Gift/by-category/2 - null null
2025-12-24 19:15:37.009 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.GetByCategory (TrickyTrayAPI)'
2025-12-24 19:15:37.012 +02:00 [INF] Route matched with {action = "GetByCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TrickyTrayAPI.DTOs.GetGiftDTO]]] GetByCategory(Int32) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 19:15:37.074 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.GiftController.GetByCategory (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 19:15:37.216 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[ImgUrl], [g].[Name], [g].[WinnerId], [c].[Id], [c].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[PhoneNumber], [u].[Id], [u].[Email], [u].[FirstName], [u].[GiftId], [u].[LastName], [u].[PhoneNumber], [u].[TypeCostumer]
FROM [Gifts] AS [g]
INNER JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Users] AS [u] ON [g].[WinnerId] = [u].[Id]
WHERE [g].[CategoryId] = @__categoryId_0
2025-12-24 19:15:37.221 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.GiftController.GetByCategory (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 143.2598ms.
2025-12-24 19:15:37.224 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[TrickyTrayAPI.Models.Gift, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[TrickyTrayAPI.DTOs.GetGiftDTO, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-24 19:15:37.227 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.GetByCategory (TrickyTrayAPI) in 188.8755ms
2025-12-24 19:15:37.230 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.GetByCategory (TrickyTrayAPI)'
2025-12-24 19:15:37.232 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Gift/by-category/2 - 200 null application/json; charset=utf-8 232.0661ms
2025-12-24 19:15:40.546 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7260/api/Gift/by-category/1 - null null
2025-12-24 19:15:40.566 +02:00 [INF] Executing endpoint 'TrickyTrayAPI.Controllers.GiftController.GetByCategory (TrickyTrayAPI)'
2025-12-24 19:15:40.573 +02:00 [INF] Route matched with {action = "GetByCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[TrickyTrayAPI.DTOs.GetGiftDTO]]] GetByCategory(Int32) on controller TrickyTrayAPI.Controllers.GiftController (TrickyTrayAPI).
2025-12-24 19:15:40.612 +02:00 [INF] Executing action method TrickyTrayAPI.Controllers.GiftController.GetByCategory (TrickyTrayAPI) - Validation state: "Valid"
2025-12-24 19:15:40.629 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[Description], [g].[DonorId], [g].[ImgUrl], [g].[Name], [g].[WinnerId], [c].[Id], [c].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[PhoneNumber], [u].[Id], [u].[Email], [u].[FirstName], [u].[GiftId], [u].[LastName], [u].[PhoneNumber], [u].[TypeCostumer]
FROM [Gifts] AS [g]
INNER JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Users] AS [u] ON [g].[WinnerId] = [u].[Id]
WHERE [g].[CategoryId] = @__categoryId_0
2025-12-24 19:15:40.636 +02:00 [INF] Executed action method TrickyTrayAPI.Controllers.GiftController.GetByCategory (TrickyTrayAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 20.7091ms.
2025-12-24 19:15:40.639 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[TrickyTrayAPI.Models.Gift, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[TrickyTrayAPI.DTOs.GetGiftDTO, TrickyTrayAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-24 19:15:40.641 +02:00 [INF] Executed action TrickyTrayAPI.Controllers.GiftController.GetByCategory (TrickyTrayAPI) in 62.754ms
2025-12-24 19:15:40.644 +02:00 [INF] Executed endpoint 'TrickyTrayAPI.Controllers.GiftController.GetByCategory (TrickyTrayAPI)'
2025-12-24 19:15:40.645 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7260/api/Gift/by-category/1 - 200 null application/json; charset=utf-8 99.3117ms
